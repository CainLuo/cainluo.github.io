
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Cain Luo">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.0">
    
    
  
    <title>Vapor:  Flutter Apprentice &rarr;  19.Saving Data With SQLite</title>
  

    
  
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2e8b5541.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
  <link rel="stylesheet" type="text/css" href="../../../styles/carbon.css">

    
  
  <script src="../../../scripts/carbon.js"></script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#15-saving-data-with-sqlite" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Cain Blog" class="md-header__button md-logo" aria-label="Cain Blog" data-md-component="logo">
      
  <img src="../../../assets/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cain Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              19.Saving Data With SQLite
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="black"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Cain Blog" class="md-nav__button md-logo" aria-label="Cain Blog" data-md-component="logo">
      
  <img src="../../../assets/favicon.png" alt="logo">

    </a>
    Cain Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Modern Concurrency in Swift
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modern Concurrency in Swift" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Modern Concurrency in Swift
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/1.Section%20I%20Modern%20Concurrency%20in%20Swift/" class="md-nav__link">
        1.Section I Modern Concurrency in Swift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/2.Chapter%201%20Why%20Modern%20Swift%20Concurrency/" class="md-nav__link">
        2.Chapter 1 Why Modern Swift Concurrency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/3.Chapter%202%20Getting%20Started%20With%20asyncawait/" class="md-nav__link">
        3.Chapter 2 Getting Started With asyncawait
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/4.Chapter%203%20AsyncSequence%20%26%20Intermediate%20Task/" class="md-nav__link">
        4.Chapter 3 AsyncSequence & Intermediate Task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/5.Chapter%204%20Custom%20Asynchronous%20Sequences%20With%20AsyncStream/" class="md-nav__link">
        5.Chapter 4 Custom Asynchronous Sequences With AsyncStream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/6.Chapter%205%20Intermediate%20asyncawait%20%26%20CheckedContinuation/" class="md-nav__link">
        6.Chapter 5 Intermediate asyncawait & CheckedContinuation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/7.Chapter%206%20Testing%20Asynchronous%20Code/" class="md-nav__link">
        7.Chapter 6 Testing Asynchronous Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/8.Chapter%207%20Concurrent%20Code%20With%20TaskGroup/" class="md-nav__link">
        8.Chapter 7 Concurrent Code With TaskGroup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/9.Chapter%208%20Getting%20Started%20With%20Actors/" class="md-nav__link">
        9.Chapter 8 Getting Started With Actors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/10.Chapter%209%20Global%20Actors/" class="md-nav__link">
        10.Chapter 9 Global Actors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/11.Chapter%2010%20Actors%20in%20a%20Distributed%20System/" class="md-nav__link">
        11.Chapter 10 Actors in a Distributed System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modern%20Concurrency%20in%20Swift/en/12.Conclusion/" class="md-nav__link">
        12.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Unity Apprentice
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Unity Apprentice" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Unity Apprentice
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/1.Section%20I%20Creating%20Your%20First%20Game/" class="md-nav__link">
        1.Section I Creating Your First Game
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/2.Getting%20Started/" class="md-nav__link">
        2.Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/3.Installing%20%26%20Using%20the%20Unity%20Editor/" class="md-nav__link">
        3.Installing & Using the Unity Editor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/4.GameObjects%20%26%20Prefabs/" class="md-nav__link">
        4.GameObjects & Prefabs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/5.Creating%20%26%20Using%20Scripts%20With%20C%23/" class="md-nav__link">
        5.Creating & Using Scripts With C#
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/6.Section%20II%20Now%20You%27re%20Building%20With%20Components/" class="md-nav__link">
        6.Section II Now You're Building With Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/7.Setting%20Up%20a%20Scene/" class="md-nav__link">
        7.Setting Up a Scene
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/8.Input%20%26%20Collisions/" class="md-nav__link">
        8.Input & Collisions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/9.User%20Interfaces/" class="md-nav__link">
        9.User Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/10.Scriptable%20Objects/" class="md-nav__link">
        10.Scriptable Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/11.Section%20III%20Smart%20Enemies%20%26%20the%20Bigger%20Picture/" class="md-nav__link">
        11.Section III Smart Enemies & the Bigger Picture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/12.Basic%20AI%20%26%20Navigation/" class="md-nav__link">
        12.Basic AI & Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/13.Advanced%20Camera%20Controls%20With%20Cinemachine/" class="md-nav__link">
        13.Advanced Camera Controls With Cinemachine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/14.Asynchronous%20Functions%2C%20Coroutines%20%26%20Object%20Pooling/" class="md-nav__link">
        14.Asynchronous Functions, Coroutines & Object Pooling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/15.Section%20IV%20Cooking%20Up%20Animations/" class="md-nav__link">
        15.Section IV Cooking Up Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/16.Basic%20Animation%20Principles/" class="md-nav__link">
        16.Basic Animation Principles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/17.Advanced%20Animation%20Principles/" class="md-nav__link">
        17.Advanced Animation Principles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/18.Advanced%20Scriptable%20Objects/" class="md-nav__link">
        18.Advanced Scriptable Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity%20Apprentice/en/19.Conclusion/" class="md-nav__link">
        19.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Living by the Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Living by the Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Living by the Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/1.Community/" class="md-nav__link">
        1.Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/2.An%20Interview%20with%20Britt%20Barak/" class="md-nav__link">
        2.An Interview with Britt Barak
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/3.An%20Interview%20with%20Ellen%20Shapiro/" class="md-nav__link">
        3.An Interview with Ellen Shapiro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/4.An%20Interview%20with%20Antonio%20Leiva/" class="md-nav__link">
        4.An Interview with Antonio Leiva
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/5.An%20Interview%20with%20Lara%20Martin/" class="md-nav__link">
        5.An Interview with Lara Martin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/6.An%20Interview%20with%20Sarah%20Olson/" class="md-nav__link">
        6.An Interview with Sarah Olson
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/7.An%20Interview%20with%20Paco%20Este%CC%81vez%20GarcI%CC%81a/" class="md-nav__link">
        7.An Interview with Paco Estévez GarcÍa
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/8.An%20Interview%20with%20Corey%20Leigh%20Latislaw/" class="md-nav__link">
        8.An Interview with Corey Leigh Latislaw
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/9.An%20Interview%20with%20Zarah%20Dominguez/" class="md-nav__link">
        9.An Interview with Zarah Dominguez
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/10.An%20Interview%20with%20Juhani%20Lehtima%CC%88ki/" class="md-nav__link">
        10.An Interview with Juhani Lehtimäki
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/11.An%20Interview%20with%20Erik%20Hellman/" class="md-nav__link">
        11.An Interview with Erik Hellman
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/12.An%20Interview%20with%20Eduardo%20Castello%CC%81%20Ferrer/" class="md-nav__link">
        12.An Interview with Eduardo Castelló Ferrer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/13.An%20Interview%20with%20Ash%20Furrow/" class="md-nav__link">
        13.An Interview with Ash Furrow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/14.An%20Interview%20with%20Hadi%20Hariri/" class="md-nav__link">
        14.An Interview with Hadi Hariri
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/15.An%20Interview%20with%20Roman%20Elizarov/" class="md-nav__link">
        15.An Interview with Roman Elizarov
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/16.Getting%20to%20Work/" class="md-nav__link">
        16.Getting to Work
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/17.An%20Interview%20with%20John%20Sundell/" class="md-nav__link">
        17.An Interview with John Sundell
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/18.An%20Interview%20with%20Felix%20Krause/" class="md-nav__link">
        18.An Interview with Felix Krause
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/19.An%20Interview%20with%20Joe%20Birch/" class="md-nav__link">
        19.An Interview with Joe Birch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/20.An%20Interview%20with%20Gabriel%20Peal/" class="md-nav__link">
        20.An Interview with Gabriel Peal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/21.An%20Interview%20with%20Marin%20Todorov/" class="md-nav__link">
        21.An Interview with Marin Todorov
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/22.An%20Interview%20with%20Mike%20Wolfson/" class="md-nav__link">
        22.An Interview with Mike Wolfson
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/23.An%20Interview%20with%20Ty%20Smith/" class="md-nav__link">
        23.An Interview with Ty Smith
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/24.An%20Interview%20with%20Marcin%20Moskala/" class="md-nav__link">
        24.An Interview with Marcin Moskala
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/25.An%20Interview%20with%20In%CC%83aki%20Villar/" class="md-nav__link">
        25.An Interview with Iñaki Villar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/26.An%20Interview%20with%20Oluwasegun%20Famisa/" class="md-nav__link">
        26.An Interview with Oluwasegun Famisa
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/27.An%20Interview%20with%20Fernando%20Cejas/" class="md-nav__link">
        27.An Interview with Fernando Cejas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living by the Code/en/28.An Interview with Tanner Wayne Nelson.md.md" class="md-nav__link">
        28.An Interview with Tanner Wayne Nelson.md
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/29.An%20Interview%20with%20Annyce%20Davis/" class="md-nav__link">
        29.An Interview with Annyce Davis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/30.An%20Interview%20with%20Rau%CC%81l%20Raja%20Marti%CC%81nez/" class="md-nav__link">
        30.An Interview with Raúl Raja Martínez
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/31.An%20Interview%20with%20Paul%20Blundell/" class="md-nav__link">
        31.An Interview with Paul Blundell
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living by the Code/en/32.An Interview with César Valiente.md.md" class="md-nav__link">
        32.An Interview with César Valiente.md
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/33%20An%20Interview%20with%20Israel%20Ferrer%20Camacho/" class="md-nav__link">
        33 An Interview with Israel Ferrer Camacho
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/34.Leadership/" class="md-nav__link">
        34.Leadership
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/35.An%20Interview%20with%20Dr.%20Joseph%20Howard/" class="md-nav__link">
        35.An Interview with Dr. Joseph Howard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/36.An%20Interview%20with%20Ray%20Wenderlich/" class="md-nav__link">
        36.An Interview with Ray Wenderlich
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/37.An%20Interview%20with%20Cate%20Huston/" class="md-nav__link">
        37.An Interview with Cate Huston
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/38.An%20Interview%20with%20Cyril%20Mottier/" class="md-nav__link">
        38.An Interview with Cyril Mottier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/39.An%20Interview%20with%20Huyen%20Tue%20Dao/" class="md-nav__link">
        39.An Interview with Huyen Tue Dao
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/40.An%20Interview%20with%20Marcin%20Krzyzanowski/" class="md-nav__link">
        40.An Interview with Marcin Krzyzanowski
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/41.An%20Interview%20with%20Mike%20Nakhimovich/" class="md-nav__link">
        41.An Interview with Mike Nakhimovich
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/42.An%20Interview%20with%20Danny%20Preussler/" class="md-nav__link">
        42.An Interview with Danny Preussler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Living%20by%20the%20Code/en/43.An%20Interview%20with%20Mark%20Allison/" class="md-nav__link">
        43.An Interview with Mark Allison
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Git Apprentice
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git Apprentice" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Git Apprentice
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/1.Section%20I%20Beginning%20Git/" class="md-nav__link">
        1.Section I Beginning Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/2.A%20Crash%20Course%20in%20Git/" class="md-nav__link">
        2.A Crash Course in Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/3.Cloning%20a%20Repo/" class="md-nav__link">
        3.Cloning a Repo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/4.Committing%20Your%20Changes/" class="md-nav__link">
        4.Committing Your Changes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/5.The%20Staging%20Area/" class="md-nav__link">
        5.The Staging Area
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/6.Ignoring%20Files%20in%20Git/" class="md-nav__link">
        6.Ignoring Files in Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/7.Git%20Log%20%26%20History/" class="md-nav__link">
        7.Git Log & History
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/8.Branching/" class="md-nav__link">
        8.Branching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/9.Merging/" class="md-nav__link">
        9.Merging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/10.Syncing%20With%20a%20Remote/" class="md-nav__link">
        10.Syncing With a Remote
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/11.Creating%20a%20Repository/" class="md-nav__link">
        11.Creating a Repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/12.Conclusion/" class="md-nav__link">
        12.Conclusion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/13.Section%20II%20Appendices/" class="md-nav__link">
        13.Section II Appendices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Git%20Apprentice/cn/14.A%20Appendix%20A%20Installing%20%26%20Configuring%20Git/" class="md-nav__link">
        14.A Appendix A Installing & Configuring Git
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          App Design Apprentice
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="App Design Apprentice" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          App Design Apprentice
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/1.Section%20I%20Design%20%26%20Tool%20Fundamentals/" class="md-nav__link">
        1.Section I Design & Tool Fundamentals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/2.Book%20Overview%20%26%20App%20Preview/" class="md-nav__link">
        2.Book Overview & App Preview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/3.Workspace%20Tour%20%26%20Figma%20Fundamentals/" class="md-nav__link">
        3.Workspace Tour & Figma Fundamentals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/4.App%20Teardowns/" class="md-nav__link">
        4.App Teardowns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/5.Section%20II%20Components%20%26%20Design%20Systems/" class="md-nav__link">
        5.Section II Components & Design Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/6.Wireframing%20%26%20Screen%20Layout/" class="md-nav__link">
        6.Wireframing & Screen Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/7.Reusable%20Elements%20%26%20Data/" class="md-nav__link">
        7.Reusable Elements & Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/8.Typography/" class="md-nav__link">
        8.Typography
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/9.Colors/" class="md-nav__link">
        9.Colors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/10.Design%20Systems/" class="md-nav__link">
        10.Design Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/11.Section%20III%20Interactive%20prototypes%20%26%20Developer%20Handoff/" class="md-nav__link">
        11.Section III Interactive prototypes & Developer Handoff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/12.Transitions%20%26%20Animations/" class="md-nav__link">
        12.Transitions & Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/13.Feedback%20%26%20Testing/" class="md-nav__link">
        13.Feedback & Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/14.Insights%20%26%20Next%20Steps/" class="md-nav__link">
        14.Insights & Next Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../App%20Design%20Apprentice/en/15.Conclusion/" class="md-nav__link">
        15.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Auto Layout by Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Auto Layout by Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Auto Layout by Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/1.Section%20I%20Beginning%20Auto%20Layout/" class="md-nav__link">
        1.Section I Beginning Auto Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/2.Introducing%20Auto%20Layout/" class="md-nav__link">
        2.Introducing Auto Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/3.Construct%20Auto%20Layout%20with%20the%20Interface%20Builder/" class="md-nav__link">
        3.Construct Auto Layout with the Interface Builder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/4.Stack%20View/" class="md-nav__link">
        4.Stack View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/5.Section%20II%20Intermediate%20Auto%20Layout/" class="md-nav__link">
        5.Section II Intermediate Auto Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/6.Construct%20Auto%20Layout%20with%20Code/" class="md-nav__link">
        6.Construct Auto Layout with Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/7.Scroll%20View/" class="md-nav__link">
        7.Scroll View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/8.Self-Sizing%20Views/" class="md-nav__link">
        8.Self-Sizing Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/9.Layout%20Guides/" class="md-nav__link">
        9.Layout Guides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/10.Content-Hugging%20%26%20Compression-Resistance%20Priorities/" class="md-nav__link">
        10.Content-Hugging & Compression-Resistance Priorities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/11.Animating%20Auto%20Layout%20Constraints/" class="md-nav__link">
        11.Animating Auto Layout Constraints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/12.Adaptive%20Layout/" class="md-nav__link">
        12.Adaptive Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/13.Dynamic%20Type/" class="md-nav__link">
        13.Dynamic Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/14.Internationalization%20%26%20Localization/" class="md-nav__link">
        14.Internationalization & Localization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/15.Common%20Auto%20Layout%20Issues/" class="md-nav__link">
        15.Common Auto Layout Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/16.Section%20III%20Advanced%20Auto%20Layout/" class="md-nav__link">
        16.Section III Advanced Auto Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/17.Under%20the%20Hood%20of%20Auto%20Layout/" class="md-nav__link">
        17.Under the Hood of Auto Layout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/18.Optimizing%20Auto%20Layout%20Performance/" class="md-nav__link">
        18.Optimizing Auto Layout Performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/19.Layout%20Prototyping%20with%20Playgrounds/" class="md-nav__link">
        19.Layout Prototyping with Playgrounds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/20.Auto%20Layout%20for%20External%20Displays/" class="md-nav__link">
        20.Auto Layout for External Displays
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/21.Designing%20Custom%20Controls/" class="md-nav__link">
        21.Designing Custom Controls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Auto%20Layout%20by%20Tutorials/en/22.Conclusion/" class="md-nav__link">
        22.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          SwiftUI Animations by Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SwiftUI Animations by Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          SwiftUI Animations by Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/1.Introducing SwiftUI Animations" class="md-nav__link">
        1.Introducing SwiftUI Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/2.Getting to Know SwiftUI Animations" class="md-nav__link">
        2.Getting to Know SwiftUI Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/3.View Transitions" class="md-nav__link">
        3.View Transitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/4.Drawing Custom Components" class="md-nav__link">
        4.Drawing Custom Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/5.Applying Complex Transformations & Interactions" class="md-nav__link">
        5.Applying Complex Transformations & Interactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/6.Intro to Custom Animations" class="md-nav__link">
        6.Intro to Custom Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/7.Complex Custom Animations" class="md-nav__link">
        7.Complex Custom Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/8.Time-Based Animations" class="md-nav__link">
        8.Time-Based Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/9.Combining Animations" class="md-nav__link">
        9.Combining Animations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/10.Recreating a Real-World Animation" class="md-nav__link">
        10.Recreating a Real-World Animation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI Animations by Tutorials/en/11.Conclusion" class="md-nav__link">
        11.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Flutter Apprentice
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flutter Apprentice" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Flutter Apprentice
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.Section%20I%20Build%20Your%20First%20Flutter%20App/" class="md-nav__link">
        1.Section I Build Your First Flutter App
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2.Getting%20Started/" class="md-nav__link">
        2.Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3.Hello%2C%20Flutter/" class="md-nav__link">
        3.Hello, Flutter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4.Section%20II%20Everything%E2%80%99s%20a%20Widget/" class="md-nav__link">
        4.Section II Everything’s a Widget
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5.Basic%20Widgets/" class="md-nav__link">
        5.Basic Widgets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../6.Understanding%20Widgets/" class="md-nav__link">
        6.Understanding Widgets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7.Scrollable%20Widgets/" class="md-nav__link">
        7.Scrollable Widgets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../8.Interactive%20Widgets/" class="md-nav__link">
        8.Interactive Widgets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../9.Section%20III%20Navigating%20Between%20Screens/" class="md-nav__link">
        9.Section III Navigating Between Screens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10.Routes%20%26%20Navigation/" class="md-nav__link">
        10.Routes & Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11.Deep%20Links%20%26%20Web%20URLs/" class="md-nav__link">
        11.Deep Links & Web URLs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12.Section%20IV%20Networking%2C%20Persistence%20and%20State/" class="md-nav__link">
        12.Section IV Networking, Persistence and State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13.Handling%20Shared%20Preferences/" class="md-nav__link">
        13.Handling Shared Preferences
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../14.Serialization%20With%20JSON/" class="md-nav__link">
        14.Serialization With JSON
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../15.Networking%20in%20Flutter/" class="md-nav__link">
        15.Networking in Flutter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../16.Using%20a%20Network%20Library/" class="md-nav__link">
        16.Using a Network Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../17.Managing%20State/" class="md-nav__link">
        17.Managing State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../18.Working%20With%20Streams/" class="md-nav__link">
        18.Working With Streams
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          19.Saving Data With SQLite
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        19.Saving Data With SQLite
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#databases" class="md-nav__link">
    Databases
  </a>
  
    <nav class="md-nav" aria-label="Databases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-sql" class="md-nav__link">
    Using SQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-queries" class="md-nav__link">
    Writing queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-data" class="md-nav__link">
    Adding data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-data" class="md-nav__link">
    Deleting data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-data" class="md-nav__link">
    Updating data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqflite" class="md-nav__link">
    sqflite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlbrite" class="md-nav__link">
    sqlbrite
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-a-database-to-the-project" class="md-nav__link">
    Adding a database to the project
  </a>
  
    <nav class="md-nav" aria-label="Adding a database to the project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-sqflite" class="md-nav__link">
    Adding sqflite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-database" class="md-nav__link">
    Setting up the database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-tables" class="md-nav__link">
    Creating tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opening-the-database" class="md-nav__link">
    Opening the database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-data-to-classes" class="md-nav__link">
    Converting data to classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-repository-like-functions" class="md-nav__link">
    Implementing repository-like functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-recipes" class="md-nav__link">
    Finding recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inserting-data-into-tables" class="md-nav__link">
    Inserting data into tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-data_1" class="md-nav__link">
    Deleting data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializing-and-closing" class="md-nav__link">
    Initializing and closing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-an-sqlite-repository" class="md-nav__link">
    Adding an SQLite repository
  </a>
  
    <nav class="md-nav" aria-label="Adding an SQLite repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-the-recipes-id" class="md-nav__link">
    Setting the recipe’s ID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inserting-the-ingredients" class="md-nav__link">
    Inserting the ingredients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-recipes" class="md-nav__link">
    Deleting recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializing-and-closing_1" class="md-nav__link">
    Initializing and closing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-app" class="md-nav__link">
    Running the app
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-moor-library" class="md-nav__link">
    Using the Moor Library
  </a>
  
    <nav class="md-nav" aria-label="Using the Moor Library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-classes" class="md-nav__link">
    Database classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-tables_1" class="md-nav__link">
    Creating tables
  </a>
  
    <nav class="md-nav" aria-label="Creating tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-the-ingredient-table" class="md-nav__link">
    Defining the Ingredient table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-database-class" class="md-nav__link">
    Creating the database class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-dao-classes" class="md-nav__link">
    Creating the DAO classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-the-part-file" class="md-nav__link">
    Generating the part file
  </a>
  
    <nav class="md-nav" aria-label="Generating the part file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-your-moor-recipes" class="md-nav__link">
    Converting your Moor recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-classes-for-ingredients" class="md-nav__link">
    Creating classes for Ingredients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-watchallrecipes" class="md-nav__link">
    Updating watchAllRecipes()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-moor-repository" class="md-nav__link">
    Creating the Moor repository
  </a>
  
    <nav class="md-nav" aria-label="Creating the Moor repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementing-the-repository" class="md-nav__link">
    Implementing the repository
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-recipes_1" class="md-nav__link">
    Finding recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inserting-recipes" class="md-nav__link">
    Inserting recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting" class="md-nav__link">
    Deleting
  </a>
  
    <nav class="md-nav" aria-label="Deleting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replacing-the-repository" class="md-nav__link">
    Replacing the repository
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-app_1" class="md-nav__link">
    Running the app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning-up-optional" class="md-nav__link">
    Cleaning up (Optional)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-points" class="md-nav__link">
    Key points
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-to-go-from-here" class="md-nav__link">
    Where to go from here?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../20.Section%20V%20Deployment/" class="md-nav__link">
        20.Section V Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../21.Platform-Specific%20App%20Assets/" class="md-nav__link">
        21.Platform-Specific App Assets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../22.Build%20%26%20Release%20an%20Android%20App/" class="md-nav__link">
        22.Build & Release an Android App
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../23.Build%20%26%20Release%20an%20iOS%20App/" class="md-nav__link">
        23.Build & Release an iOS App
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../24.Section%20VI%20Working%20With%20Firebase%20Cloud%20Firestore/" class="md-nav__link">
        24.Section VI Working With Firebase Cloud Firestore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../25.Firebase%20Cloud%20Firestore/" class="md-nav__link">
        25.Firebase Cloud Firestore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../26.Conclusion/" class="md-nav__link">
        26.Conclusion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../27.Appendices/" class="md-nav__link">
        27.Appendices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../28.A%20Appendix%20A%20Chapter%205%20Solution%201/" class="md-nav__link">
        28.A Appendix A Chapter 5 Solution 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../29.B%20Appendix%20B%20Chapter%205%20Solution%202/" class="md-nav__link">
        29.B Appendix B Chapter 5 Solution 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Dart Apprentice-Fundamentals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dart Apprentice-Fundamentals" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Dart Apprentice-Fundamentals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/1.Hello%2C%20Dart%21/" class="md-nav__link">
        1.Hello, Dart!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/2.Expressions%2C%20Variables%20%26%20Constants/" class="md-nav__link">
        2.Expressions, Variables & Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/3.Types%20%26%20Operations/" class="md-nav__link">
        3.Types & Operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/4.Strings/" class="md-nav__link">
        4.Strings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/5.Control%20Flow/" class="md-nav__link">
        5.Control Flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/6.Loops/" class="md-nav__link">
        6.Loops
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/7.Functions/" class="md-nav__link">
        7.Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/8.Classes/" class="md-nav__link">
        8.Classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/9.Constructors/" class="md-nav__link">
        9.Constructors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/10.Static%20Members/" class="md-nav__link">
        10.Static Members
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/11.Nullability/" class="md-nav__link">
        11.Nullability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/12.Lists/" class="md-nav__link">
        12.Lists
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/13.Sets/" class="md-nav__link">
        13.Sets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/14.Maps/" class="md-nav__link">
        14.Maps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/15.Iterables/" class="md-nav__link">
        15.Iterables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Fundamentals/en/16.Conclusion/" class="md-nav__link">
        16.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Data Structures & Algorithms in Dart
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Structures & Algorithms in Dart" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Data Structures & Algorithms in Dart
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/1.Section%20I%20Introduction/" class="md-nav__link">
        1.Section I Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/2.Why%20Learn%20Data%20Structures%20%26%20Algorithms/" class="md-nav__link">
        2.Why Learn Data Structures & Algorithms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/3.Complexity/" class="md-nav__link">
        3.Complexity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/4.Basic%20Data%20Structures%20in%20Dart/" class="md-nav__link">
        4.Basic Data Structures in Dart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/5.Section%20II%20Elementary%20Data%20Structures/" class="md-nav__link">
        5.Section II Elementary Data Structures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/6.Stacks/" class="md-nav__link">
        6.Stacks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/7.Linked%20Lists/" class="md-nav__link">
        7.Linked Lists
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/8.Queues/" class="md-nav__link">
        8.Queues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/9.Section%20III%20Trees/" class="md-nav__link">
        9.Section III Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/10.Trees/" class="md-nav__link">
        10.Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/12.Binary%20Trees/" class="md-nav__link">
        12.Binary Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/13.Binary%20Search%20Trees/" class="md-nav__link">
        13.Binary Search Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/14.AVL%20Trees/" class="md-nav__link">
        14.AVL Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/15.Tries/" class="md-nav__link">
        15.Tries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/16.Binary%20Search/" class="md-nav__link">
        16.Binary Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/17.Heaps/" class="md-nav__link">
        17.Heaps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/18.Priority%20Queues/" class="md-nav__link">
        18.Priority Queues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/19.Section%20IV%20Sorting%20Algorithms/" class="md-nav__link">
        19.Section IV Sorting Algorithms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/20.O%28n%C2%B2%29%20Sorting%20Algorithms/" class="md-nav__link">
        20.O(n²) Sorting Algorithms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/21.Merge%20Sort/" class="md-nav__link">
        21.Merge Sort
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/22.Radix%20Sort/" class="md-nav__link">
        22.Radix Sort
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/23.Heapsort/" class="md-nav__link">
        23.Heapsort
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/24.Quicksort/" class="md-nav__link">
        24.Quicksort
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/25.Section%20V%20Graphs/" class="md-nav__link">
        25.Section V Graphs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/26.Graphs/" class="md-nav__link">
        26.Graphs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/27.Breadth-First%20Search/" class="md-nav__link">
        27.Breadth-First Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/28.Depth-First%20Search/" class="md-nav__link">
        28.Depth-First Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/29.Dijkstra%E2%80%99s%20Algorithm/" class="md-nav__link">
        29.Dijkstra’s Algorithm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/30.Conclusion/" class="md-nav__link">
        30.Conclusion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/31.Section%20VI%20Challenge%20Solutions/" class="md-nav__link">
        31.Section VI Challenge Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/32.Chapter%204%20Solutions/" class="md-nav__link">
        32.Chapter 4 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/33.Chapter%205%20Solutions/" class="md-nav__link">
        33.Chapter 5 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/34.Chapter%206%20Solutions/" class="md-nav__link">
        34.Chapter 6 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/35.Chapter%207%20Solutions/" class="md-nav__link">
        35.Chapter 7 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/36.Chapter%208%20Solutions/" class="md-nav__link">
        36.Chapter 8 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/37.Chapter%209%20Solutions/" class="md-nav__link">
        37.Chapter 9 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/38.Chapter%2010%20Solutions/" class="md-nav__link">
        38.Chapter 10 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/39.Chapter%2011%20Solutions/" class="md-nav__link">
        39.Chapter 11 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/40.Chapter%2012%20Solutions/" class="md-nav__link">
        40.Chapter 12 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/41.Chapter%2013%20Solutions/" class="md-nav__link">
        41.Chapter 13 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/42.Chapter%2014%20Solutions/" class="md-nav__link">
        42.Chapter 14 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/43.Chapter%2015%20Solutions/" class="md-nav__link">
        43.Chapter 15 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/44.Chapter%2016%20Solutions/" class="md-nav__link">
        44.Chapter 16 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/45.Chapter%2017%20Solutions/" class="md-nav__link">
        45.Chapter 17 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/46.Chapter%2018%20Solutions/" class="md-nav__link">
        46.Chapter 18 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/47.Chapter%2019%20Solutions/" class="md-nav__link">
        47.Chapter 19 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/48.Chapter%2020%20Solutions/" class="md-nav__link">
        48.Chapter 20 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/49.Chapter%2021%20Solutions/" class="md-nav__link">
        49.Chapter 21 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/50.Chapter%2022%20Solutions/" class="md-nav__link">
        50.Chapter 22 Solutions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Dart/en/51.Chapter%2023%20Solutions/" class="md-nav__link">
        51.Chapter 23 Solutions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Swift中的数据结构和算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Swift中的数据结构和算法" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Swift中的数据结构和算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/1.Section%20I%20Introduction/" class="md-nav__link">
        1.第一节简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/2.Why%20Learn%20Data%20Structures%20%26%20Algorithms/" class="md-nav__link">
        2.为什么学习数据结构和算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/3.Complexity/" class="md-nav__link">
        3.复杂性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/4.Swift%20Standard%20Library/" class="md-nav__link">
        4.Swift标准库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/5.Section%20II%20Elementary%20Data%20Structures/" class="md-nav__link">
        5.第二节基本数据结构
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/6.Stacks/" class="md-nav__link">
        6.堆栈
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/7.Stack%20Challenges/" class="md-nav__link">
        7.堆栈挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/8.Linked%20Lists/" class="md-nav__link">
        8.链接列表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/9.Linked%20List%20Challenges/" class="md-nav__link">
        9.链接列表的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/10.Queues/" class="md-nav__link">
        10.队列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/11.Queue%20Challenges/" class="md-nav__link">
        11.排队挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/12.Section%20III%20Trees/" class="md-nav__link">
        12.第三节树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/13.Trees/" class="md-nav__link">
        13.树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/14.Tree%20Challenges/" class="md-nav__link">
        14.树的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/15.Binary%20Trees/" class="md-nav__link">
        15.二叉树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/16.Binary%20Tree%20Challenges/" class="md-nav__link">
        16.二叉树的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/17.Binary%20Search%20Trees/" class="md-nav__link">
        17.二叉树搜索
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/18.Binary%20Search%20Tree%20Challenges/" class="md-nav__link">
        18.二叉树搜索的挑战.md
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/19.AVL%20Trees/" class="md-nav__link">
        19.AVL树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/20.AVL%20Tree%20Challenges/" class="md-nav__link">
        20.AVL树的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/21.Tries/" class="md-nav__link">
        21.尝试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/22.Trie%20Challenges/" class="md-nav__link">
        22.尝试的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/23.Binary%20Search/" class="md-nav__link">
        23.二分搜索
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/24.Binary%20Search%20Challenges/" class="md-nav__link">
        24.二分搜索的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/25.Heaps/" class="md-nav__link">
        25.堆
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/26.Heap%20Challenges/" class="md-nav__link">
        26.堆的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/27.Priority%20Queues/" class="md-nav__link">
        27.优先队列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/28.Priority%20Queue%20Challenges/" class="md-nav__link">
        28.优先队列的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/29.Section%20IV%20Sorting%20Algorithms/" class="md-nav__link">
        29.第四节排序算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/30.O%28n%C2%B2%29%20Sorting%20Algorithms/" class="md-nav__link">
        30.O(n²)排序算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/31.O%28n%C2%B2%29%20Sorting%20Challenges/" class="md-nav__link">
        31.O(n²)排序的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/32.Merge%20Sort/" class="md-nav__link">
        32.合并排序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/33.Merge%20Sort%20Challenges/" class="md-nav__link">
        33.合并排序的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/34.Radix%20Sort/" class="md-nav__link">
        34.基数排序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/35.Radix%20Sort%20Challenges/" class="md-nav__link">
        35.基数排序的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/36.Heapsort/" class="md-nav__link">
        36.堆垛
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/37.Heapsort%20Challenges/" class="md-nav__link">
        37.堆垛的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/38.Quicksort/" class="md-nav__link">
        38.筛选
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/39.Quicksort%20Challenges/" class="md-nav__link">
        39.筛选的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/40.Section%20V%20Graphs/" class="md-nav__link">
        40.第五节图表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/41.Graphs/" class="md-nav__link">
        41.图表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/42.Graph%20Challenges/" class="md-nav__link">
        42.图表挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/43.Breadth-First%20Search/" class="md-nav__link">
        43.广度优先搜索
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/44.Breadth-First%20Search%20Challenges/" class="md-nav__link">
        44.广度优先搜索的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/45.Depth-First%20Search/" class="md-nav__link">
        45.深度优先搜索
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/46.Depth-First%20Search%20Challenges/" class="md-nav__link">
        46.深度优先搜索的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/47.Dijkstra%E2%80%99s%20Algorithm/" class="md-nav__link">
        47.迪克斯特拉的算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/48.Dijkstra%E2%80%99s%20Algorithm%20Challenges/" class="md-nav__link">
        48.迪克斯特拉算法的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/49.Prim%E2%80%99s%20Algorithm/" class="md-nav__link">
        49.普利姆的算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/50.Prim%E2%80%99s%20Algorithm%20Challenges/" class="md-nav__link">
        50.普利姆算法的挑战
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Data%20Structures%20%26%20Algorithms%20in%20Swift/cn/51.Conclusion/" class="md-nav__link">
        51.结语
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Dart Apprentice-Beyond the Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dart Apprentice-Beyond the Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Dart Apprentice-Beyond the Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/1.String%20Manipulation/" class="md-nav__link">
        1.String Manipulation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/2.Anonymous%20Functions/" class="md-nav__link">
        2.Anonymous Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/3.Inheritance/" class="md-nav__link">
        3.Inheritance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/4.Abstract%20Classes/" class="md-nav__link">
        4.Abstract Classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/5.Interfaces/" class="md-nav__link">
        5.Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/6.Mixins/" class="md-nav__link">
        6.Mixins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/7.Extension%20Methods/" class="md-nav__link">
        7.Extension Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/8.Generics/" class="md-nav__link">
        8.Generics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/9.Enhanced%20Enums/" class="md-nav__link">
        9.Enhanced Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/10.Error%20Handling/" class="md-nav__link">
        10.Error Handling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/11.Concurrency/" class="md-nav__link">
        11.Concurrency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/12.Futures/" class="md-nav__link">
        12.Futures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/13.Streams/" class="md-nav__link">
        13.Streams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/14.Isolates/" class="md-nav__link">
        14.Isolates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dart%20Apprentice-Beyond%20the%20Basics/en/15.Conclusion/" class="md-nav__link">
        15.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Real-World Flutter by Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Real-World Flutter by Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Real-World Flutter by Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/1.Setting%20up%20Your%20Environment/" class="md-nav__link">
        1.Setting up Your Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/2.Mastering%20the%20Repository%20Pattern/" class="md-nav__link">
        2.Mastering the Repository Pattern
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/3.Managing%20State%20With%20Cubits%20%26%20the%20Bloc%20Library/" class="md-nav__link">
        3.Managing State With Cubits & the Bloc Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/4.Validating%20Forms%20With%20Cubits/" class="md-nav__link">
        4.Validating Forms With Cubits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/5.Managing%20Complex%20State%20With%20Blocs/" class="md-nav__link">
        5.Managing Complex State With Blocs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/6.Authenticating%20Users/" class="md-nav__link">
        6.Authenticating Users
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/7.Routing%20%26%20Navigating/" class="md-nav__link">
        7.Routing & Navigating
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/8.Deep%20Linking/" class="md-nav__link">
        8.Deep Linking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/9.Internationalizing%20%26%20Localizing/" class="md-nav__link">
        9.Internationalizing & Localizing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/10.Dynamic%20Theming%20%26%20Dark%20Mode/" class="md-nav__link">
        10.Dynamic Theming & Dark Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/11.Creating%20Your%20Own%20Widget%20Catalog/" class="md-nav__link">
        11.Creating Your Own Widget Catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/12.Supporting%20the%20Development%20Lifecycle%20With%20Firebase/" class="md-nav__link">
        12.Supporting the Development Lifecycle With Firebase
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/13.Running%20Live%20Experiments%20With%20AB%20Testing%20%26%20Feature%20Flags/" class="md-nav__link">
        13.Running Live Experiments With AB Testing & Feature Flags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/14.Automated%20Testing/" class="md-nav__link">
        14.Automated Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/15.Automating%20Test%20Executions%20%26%20Build%20Distributions/" class="md-nav__link">
        15.Automating Test Executions & Build Distributions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Real-World%20Flutter%20by%20Tutorials/en/16.Conclusion/" class="md-nav__link">
        16.Conclusion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          macOS的教程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="macOS的教程" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          macOS的教程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/1.Section%20I%20Your%20First%20App%20On%20This%20Day/" class="md-nav__link">
        1.第一节：你在这一天的第一个应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/2.Designing%20the%20Data%20Model/" class="md-nav__link">
        2.设计数据模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/3.Working%20With%20Windows/" class="md-nav__link">
        3.使用Windows工作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/4.Adding%20Menus%20%26%20Toolbars/" class="md-nav__link">
        4.添加菜单和工具条
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/5.Using%20Tables%20%26%20Custom%20Views/" class="md-nav__link">
        5.使用表和自定义视图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/6.Setting%20Preferences%20%26%20Icons/" class="md-nav__link">
        6.设置首选项和图标
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/7.Why%20Write%20a%20macOS%20App/" class="md-nav__link">
        7.为什么要写一个macOS应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/8.Section%20II%20Building%20a%20Menu%20Bar%20App/" class="md-nav__link">
        8.第二节：构建一个菜单栏应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/9.Using%20the%20Menu%20Bar%20for%20an%20App/" class="md-nav__link">
        9.为一个应用程序使用菜单栏
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/10.Working%20with%20Timers%2C%20Alerts%20%26%20Notifications/" class="md-nav__link">
        10.使用计时器、警报和通知的工作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/11.Adding%20Your%20Own%20Tasks/" class="md-nav__link">
        11.添加你自己的任务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/12.Section%20III%20Building%20a%20Document-based%20App/" class="md-nav__link">
        12.第三节：构建一个基于文档的应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/13.Creating%20A%20Document-Based%20App/" class="md-nav__link">
        13.创建一个基于文档的应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/14.Adding%20Menu%20Controls/" class="md-nav__link">
        14.添加菜单控件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/15.Section%20IV%20Advanced%20Wizardry/" class="md-nav__link">
        15.第四节：高级魔法师
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/16.Diving%20Deeper%20Into%20Your%20Mac/" class="md-nav__link">
        16.更深入地了解你的Mac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/17.Adding%20the%20Interface/" class="md-nav__link">
        17.添加界面
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/18.Automation%20for%20Your%20App/" class="md-nav__link">
        18.为您的应用程序提供自动化服务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/19.Section%20V%20Distributing%20Your%20macOS%20Apps/" class="md-nav__link">
        19.第五节：分发你的macOS应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/20.Using%20the%20Mac%20App%20Store/" class="md-nav__link">
        20.使用Mac应用程序商店
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/21.Distributing%20Externally/" class="md-nav__link">
        21.对外分发
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../macOS%20by%20Tutorials/cn/22.Conclusion/" class="md-nav__link">
        22.总结
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          Swift服务端Vapor
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Swift服务端Vapor" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          Swift服务端Vapor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/1.Section%20I%20Creating%20a%20Simple%20Web%20API/" class="md-nav__link">
        Section I: 创建一个简单的网络API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/2.Chapter%201%20Introduction/" class="md-nav__link">
        1.简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/3.Chapter%202%20Hello%2C%20Vapor%21/" class="md-nav__link">
        2.你好, Vapor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/4.Chapter%203%20HTTP%20Basics/" class="md-nav__link">
        3.HTTP基础知识
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/5.Chapter%204%20Async/" class="md-nav__link">
        4.异步
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/6.Chapter%205%20Fluent%20%26%20Persisting%20Models/" class="md-nav__link">
        5.Fluent和持久化模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/7.Chapter%206%20Configuring%20a%20Database/" class="md-nav__link">
        6.配置数据库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/8.Chapter%207%20CRUD%20Database%20Operations/" class="md-nav__link">
        7.CRUD数据库操作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/9.Chapter%208%20Controllers/" class="md-nav__link">
        8.控制器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/10.Chapter%209%20Parent-Child%20Relationships/" class="md-nav__link">
        9.父子关系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/11.Chapter%2010%20Sibling%20Relationships/" class="md-nav__link">
        10.同级关系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/12.Chapter%2011%20Testing/" class="md-nav__link">
        11.测试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/13.Chapter%2012%20Creating%20a%20Simple%20iPhone%20App%2C%20Part%201/" class="md-nav__link">
        12.创建一个简单的iPhone App, 第1部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/14.Chapter%2013%20Creating%20a%20Simple%20iPhone%20App%2C%20Part%202/" class="md-nav__link">
        13.创建一个简单的iPhone App, 第2部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/15.Section%20II%20Making%20a%20Simple%20Web%20App/" class="md-nav__link">
        Section II: 制作一个简单的网络应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/16.Chapter%2014%20Templating%20with%20Leaf/" class="md-nav__link">
        14.用Leaf进行模板设计
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/17.Chapter%2015%20Beautifying%20Pages/" class="md-nav__link">
        15.美化页面
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/18.Chapter%2016%20Making%20a%20Simple%20Web%20App%2C%20Part%201/" class="md-nav__link">
        16.制作一个简单的Web应用程序，第1部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/19.Chapter%2017%20Making%20a%20Simple%20Web%20App%2C%20Part%202/" class="md-nav__link">
        17.制作一个简单的Web应用程序，第2部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/20.Section%20III%20Validation%2C%20Users%20%26%20Authentication/" class="md-nav__link">
        Section III: 验证、用户和认证
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/21.Chapter%2018%20API%20Authentication%2C%20Part%201/" class="md-nav__link">
        18.API认证，第1部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/22.Chapter%2019%20API%20Authentication%2C%20Part%202/" class="md-nav__link">
        19.API认证，第2部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/23.Chapter%2020%20Web%20Authentication%2C%20Cookies%20%26%20Sessions/" class="md-nav__link">
        20.Web认证、Cookies和Sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/24.Chapter%2021%20Validation/" class="md-nav__link">
        21.验证
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/25.Chapter%2022%20Google%20Authentication/" class="md-nav__link">
        22.Google验证
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/26.Chapter%2023%20GitHub%20Authentication/" class="md-nav__link">
        23.GitHub验证
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/27.Chapter%2024%20Sign%20in%20with%20Apple%20Authentication/" class="md-nav__link">
        24.使用苹果认证登录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/28.Section%20IV%20Advanced%20Server-Side%20Swift/" class="md-nav__link">
        Section IV: 高级服务器端Swift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/29.Chapter%2025%20Password%20Reset%20%26%20Emails/" class="md-nav__link">
        25.密码重置和电子邮件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/30.Chapter%2026%20Adding%20Profile%20Pictures/" class="md-nav__link">
        26.添加个人资料图片
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/31.Chapter%2027%20DatabaseAPI%20Versioning%20%26%20Migration/" class="md-nav__link">
        27.数据库/API版本和迁移
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/32.Chapter%2028%20Caching/" class="md-nav__link">
        28.缓存
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/33.Chapter%2029%20Middleware/" class="md-nav__link">
        29.中间件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/34.Chapter%2030%20WebSockets/" class="md-nav__link">
        30.WebSockets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/35.Chapter%2031%20Advanced%20Fluent/" class="md-nav__link">
        31.Fluent进阶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/36.Section%20V%20Production%20%26%20External%20Deployment/" class="md-nav__link">
        Section V: 生产和外部部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/37.Chapter%2032%20Deploying%20with%20Heroku/" class="md-nav__link">
        32.使用Heroku进行部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/38.Chapter%2033%20Deploying%20with%20Docker/" class="md-nav__link">
        33.使用Docker进行部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/39.Chapter%2034%20Deploying%20with%20AWS/" class="md-nav__link">
        34.使用AWS进行部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/40.Chapter%2035%20Production%20Concerns%20%26%20Redis/" class="md-nav__link">
        35.生产方面的关注
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/41.Chapter%2036%20Microservices%2C%20Part%201/" class="md-nav__link">
        36.微服务，第1部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Server-Side-Swift-with-Vapor/cn/42.Chapter%2037%20Microservices%2C%20Part%202/" class="md-nav__link">
        37.微服务，第2部分
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Swift专家
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Swift专家" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Swift专家
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/1.Section%20I%20Core%20Concepts/" class="md-nav__link">
        第一节：核心概念
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/2.Chapter%201%20Introduction/" class="md-nav__link">
        1.简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/3.Chapter%202%20Types%20%26%20Mutation/" class="md-nav__link">
        2.类型与变异
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/4.Chapter%203%20Protocols/" class="md-nav__link">
        3.协议
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/5.Chapter%204%20Generics/" class="md-nav__link">
        4.泛型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/6.Section%20II%20Standard%20Library/" class="md-nav__link">
        第二节：标准库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/7.Chapter%205%20Numerics%20%26%20Ranges/" class="md-nav__link">
        5.数字与区间
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/8.Chapter%206%20Sequences%2C%20Collections%20%26%20Algorithms/" class="md-nav__link">
        6.序列、集合和算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/9.Chapter%207%20Strings/" class="md-nav__link">
        7.字符串
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/10.Chapter%208%20Codable/" class="md-nav__link">
        8.Codable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/11.Chapter%209%20Unsafe/" class="md-nav__link">
        9.不安全
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/12.Section%20III%20Techniques/" class="md-nav__link">
        第三部分：技术
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/13.Chapter%2010%20Higher-Order%20Functions/" class="md-nav__link">
        10.高阶函数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/14.Chapter%2011%20Functional%20Reactive%20Programming/" class="md-nav__link">
        11.功能性反应式编程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/15.Chapter%2012%20Objective-C%20Interoperability/" class="md-nav__link">
        12.Objective-C的互操作性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/16.Chapter%2013%20Instrumentation/" class="md-nav__link">
        13.仪器仪表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Expert-Swift/cn/17.Chapter%2014%20API%20Design%20Tips%20%26%20Tricks/" class="md-nav__link">
        14.API设计技巧和窍门
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          iOS驱动式测试教程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="iOS驱动式测试教程" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          iOS驱动式测试教程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/1.Section%20I%20Hello%2C%20TDD%21/" class="md-nav__link">
        第一节：你好，TDD!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/2.What%20Is%20TDD%3F/" class="md-nav__link">
        1.什么是TDD？
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/3.The%20TDD%20Cycle/" class="md-nav__link">
        2.TDD周期
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/4.TDD%20App%20Setup/" class="md-nav__link">
        3.TDD应用程序设置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/5.Section%20II%20Beginning%20TDD/" class="md-nav__link">
        第二节：开始TDD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/6.Test%20Expressions/" class="md-nav__link">
        4.测试表达式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/7.Test%20Expectations/" class="md-nav__link">
        5.测试期望
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/8.Dependency%20Injection%20%26%20Mocks/" class="md-nav__link">
        6.依赖性注入和Mocks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/9.Section%20III%20TDD%20With%20Networking/" class="md-nav__link">
        第三节：带网络的TDD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/10.Introducing%20Dog%20Patch/" class="md-nav__link">
        7.Dog Patch介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/11.RESTful%20Networking/" class="md-nav__link">
        8.RESTful网络
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/12.Using%20the%20Network%20Client/" class="md-nav__link">
        9.使用网络客户端
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/13.ImageClient/" class="md-nav__link">
        10.ImageClient
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/14.Section%20IV%20TDD%20in%20Legacy%20Apps/" class="md-nav__link">
        第四节：遗留应用程序中的TDD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/15.Legacy%20Problems/" class="md-nav__link">
        11.遗留问题
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/16.Dependency%20Maps/" class="md-nav__link">
        12.依赖关系图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/17.Breaking%20Up%20Dependencies/" class="md-nav__link">
        13.打破依赖关系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/18.Modularizing%20Dependencies/" class="md-nav__link">
        14.模块化的依赖关系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iOS-Test-Driven-Development-by-Tutorials/cn/19.Adding%20Features%20to%20Existing%20Classes/" class="md-nav__link">
        15.为现有的类添加功能
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          SwiftUI学徒
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SwiftUI学徒" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          SwiftUI学徒
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/1.Section%20I%20Your%20first%20app%20HIITFit/" class="md-nav__link">
        第一节：你的第一个应用程序HIITFit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/2.Chapter%201%20Checking%20Your%20Tools/" class="md-nav__link">
        第1章：检查你的工具
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/3.Chapter%202%20Planning%20a%20Paged%20App/" class="md-nav__link">
        第2章：规划一个分页的应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/4.Chapter%203%20Prototyping%20the%20Main%20View/" class="md-nav__link">
        第3章：主视图的原型设计
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/5.Chapter%204%20Prototyping%20Supplementary%20Views/" class="md-nav__link">
        第4章：原型设计补充视图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/6.Chapter%205%20Organizing%20Your%20App%E2%80%99s%20Data/" class="md-nav__link">
        第5章：组织你的应用程序的数据
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/7.Chapter%206%20Adding%20Functionality%20to%20Your%20App/" class="md-nav__link">
        第6章：在你的应用程序中添加功能
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/8.Chapter%207%20Observing%20Objects/" class="md-nav__link">
        第7章：观察物体
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/9.Chapter%208%20Saving%20Settings/" class="md-nav__link">
        第8章：保存设置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/10.Chapter%209%20Saving%20History%20Data/" class="md-nav__link">
        第9章：保存历史数据
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/11.Chapter%2010%20Refining%20Your%20App/" class="md-nav__link">
        第10章：完善你的应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/12.Chapter%2011%20Understanding%20Property%20Wrappers/" class="md-nav__link">
        第11章：了解属性包装器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/13.Chapter%2012%20Apple%20App%20Development%20Ecosystem/" class="md-nav__link">
        第12章：苹果应用开发生态系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/14.Section%20II%20Your%20second%20app%20Cards/" class="md-nav__link">
        第二节：你的第二个应用程序卡
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/15.Chapter%2013%20Outlining%20a%20Photo%20Collage%20App/" class="md-nav__link">
        第13章：勾勒出一个照片拼贴的应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/16.Chapter%2014%20Gestures/" class="md-nav__link">
        第14章：手势
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/17.Chapter%2015%20Structures%2C%20Classes%20%26%20Protocols/" class="md-nav__link">
        第15章：结构、类和协议
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/18.Chapter%2016%20Adding%20Assets%20to%20Your%20App/" class="md-nav__link">
        第16章：向你的应用程序添加资产
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/19.Chapter%2017%20Interfacing%20With%20UIKit/" class="md-nav__link">
        第17章：与UIKit的接口
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/20.Chapter%2018%20Paths%20%26%20Custom%20Shapes/" class="md-nav__link">
        第18章：路径和自定义形状
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/21.Chapter%2019%20Saving%20Files/" class="md-nav__link">
        第19章：保存文件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/22.Chapter%2020%20Delightful%20UX%20%E2%80%94%20Layout/" class="md-nav__link">
        第20章：愉快的用户体验--版面设计
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/23.Chapter%2021%20Delightful%20UX%20%E2%80%94%20Final%20Touches/" class="md-nav__link">
        第21章：愉悦的用户体验--最后的修饰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/24.Section%20III%20Your%20third%20app%20RWFreeView/" class="md-nav__link">
        第三节：你的第三个应用程序RWFreeView
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/25.Chapter%2022%20Lists%20%26%20Navigation/" class="md-nav__link">
        第22章：列表与导航
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/26.Chapter%2023%20Just%20Enough%20Web%20Stuff/" class="md-nav__link">
        第23章：足够的网络东西
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/27.Chapter%2024%20Downloading%20Data/" class="md-nav__link">
        第24章：下载数据
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/28.Chapter%2025%20Implementing%20Filter%20Options/" class="md-nav__link">
        第25章：实施过滤器选项
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../SwiftUI-Apprentice/cn/29.Chapter%2026%20Widgets/" class="md-nav__link">
        第26章：小工具
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_19" type="checkbox" id="__nav_19" >
      
      
      
      
        <label class="md-nav__link" for="__nav_19">
          Swift的异步编程Combine
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Swift的异步编程Combine" data-md-level="1">
        <label class="md-nav__title" for="__nav_19">
          <span class="md-nav__icon md-icon"></span>
          Swift的异步编程Combine
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/1.Section%20I%20Introduction%20to%20Combine/" class="md-nav__link">
        第一部分：Combine简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/2.Chapter%201%20Hello%2C%20Combine%21/" class="md-nav__link">
        第1章：你好，Combine!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/3.Chapter%202%20Publishers%20%26%20Subscribers/" class="md-nav__link">
        第2章：Publishers和Subscribers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/4.Section%20II%20Operators/" class="md-nav__link">
        第二部分：操作符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/5.Chapter%203%20Transforming%20Operators/" class="md-nav__link">
        第3章：变换运算符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/6.Chapter%204%20Filtering%20Operators/" class="md-nav__link">
        第4章：Filtering操作符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/7.Chapter%205%20Combining%20Operators/" class="md-nav__link">
        第5章：Combining操作符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/8.Chapter%206%20Time%20Manipulation%20Operators/" class="md-nav__link">
        第6章：时间操纵操作符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/9.Chapter%207%20Sequence%20Operators/" class="md-nav__link">
        第7章：Sequence操作符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/10.Chapter%208%20In%20Practice%20Project%20Collage/" class="md-nav__link">
        第8章：实践项目Collage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/11.Section%20III%20Combine%20in%20Action/" class="md-nav__link">
        第三部分：Combine的事件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/12.Chapter%209%20Networking/" class="md-nav__link">
        第9章：网络
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/13.Chapter%2010%20Debugging/" class="md-nav__link">
        第10章：调试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/14.Chapter%2011%20Timers/" class="md-nav__link">
        第11章：计时器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/15.Chapter%2012%20Key-Value%20Observing/" class="md-nav__link">
        第12章：键值观察
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/16.Chapter%2013%20Resource%20Management/" class="md-nav__link">
        第13章：资源管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/17.Chapter%2014%20In%20Practice%20Project%20News/" class="md-nav__link">
        第14章：实践："新闻"项目
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/18.Section%20IV%20Advanced%20Combine/" class="md-nav__link">
        第四部分：高级Combine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/19.Chapter%2015%20In%20Practice%20Combine%20%26%20SwiftUI/" class="md-nav__link">
        第15章：实践Combine & SwiftUI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/20.Chapter%2016%20Error%20Handling/" class="md-nav__link">
        第16章：Error处理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/21.Chapter%2017%20Schedulers/" class="md-nav__link">
        第17章：调度器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/22.Chapter%2018%20Custom%20Publishers%20%26%20Handling%20Backpressure/" class="md-nav__link">
        第18章：定制发布者和处理背压
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/23.Chapter%2019%20Testing%20Combine%20Code/" class="md-nav__link">
        第19章：测试Combine代码
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/24.Section%20V%20Building%20a%20Complete%20App/" class="md-nav__link">
        第五部分：构建一个完整的应用程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Combine-Asynchronous-Programming-with-Swift/cn/25.Chapter%2020%20In%20Practice%20Building%20a%20Complete%20App/" class="md-nav__link">
        第20章：在实践中建立一个完整的应用程序
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_20" type="checkbox" id="__nav_20" >
      
      
      
      
        <label class="md-nav__link" for="__nav_20">
          Accessibility教程
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Accessibility教程" data-md-level="1">
        <label class="md-nav__title" for="__nav_20">
          <span class="md-nav__icon md-icon"></span>
          Accessibility教程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Accessibility/1.iOS%20Accessibility%20Getting%20Started/" class="md-nav__link">
        Accessibility：入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Accessibility/2.iOS%20Accessibility%20Tutorial%20Making%20Custom%20Controls%20Accessible/" class="md-nav__link">
        iOS无障碍教程：实现自定义控件的无障碍使用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_21" type="checkbox" id="__nav_21" >
      
      
      
      
        <label class="md-nav__link" for="__nav_21">
          杂七杂八
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="杂七杂八" data-md-level="1">
        <label class="md-nav__title" for="__nav_21">
          <span class="md-nav__icon md-icon"></span>
          杂七杂八
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/Yunzai/Yunzai-bot%E5%AE%89%E8%A3%85%E7%BB%8F%E5%8E%86%E5%88%86%E4%BA%AB/" class="md-nav__link">
        Yunzai-bot搭建教程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/SwiftCharts/SwiftCharts%E6%95%99%E7%A8%8B/" class="md-nav__link">
        SwiftCharts教程：入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/DocC/DocC%E6%95%99%E7%A8%8B/" class="md-nav__link">
        DocC教程：入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/SwiftUI%E6%9C%AC%E5%9C%B0%E5%8C%96/iOS%E7%9A%84SwiftUI%E6%9C%AC%E5%9C%B0%E5%8C%96%E6%95%99%E7%A8%8B%E5%85%A5%E9%97%A8/" class="md-nav__link">
        iOS的SwiftUI本地化教程入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/SwiftGen/iOS%E7%9A%84SwiftGen%E6%95%99%E7%A8%8B/" class="md-nav__link">
        iOS的SwiftGen教程
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#databases" class="md-nav__link">
    Databases
  </a>
  
    <nav class="md-nav" aria-label="Databases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-sql" class="md-nav__link">
    Using SQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-queries" class="md-nav__link">
    Writing queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-data" class="md-nav__link">
    Adding data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-data" class="md-nav__link">
    Deleting data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-data" class="md-nav__link">
    Updating data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqflite" class="md-nav__link">
    sqflite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlbrite" class="md-nav__link">
    sqlbrite
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-a-database-to-the-project" class="md-nav__link">
    Adding a database to the project
  </a>
  
    <nav class="md-nav" aria-label="Adding a database to the project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-sqflite" class="md-nav__link">
    Adding sqflite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-database" class="md-nav__link">
    Setting up the database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-tables" class="md-nav__link">
    Creating tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opening-the-database" class="md-nav__link">
    Opening the database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-data-to-classes" class="md-nav__link">
    Converting data to classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-repository-like-functions" class="md-nav__link">
    Implementing repository-like functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-recipes" class="md-nav__link">
    Finding recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inserting-data-into-tables" class="md-nav__link">
    Inserting data into tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-data_1" class="md-nav__link">
    Deleting data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializing-and-closing" class="md-nav__link">
    Initializing and closing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-an-sqlite-repository" class="md-nav__link">
    Adding an SQLite repository
  </a>
  
    <nav class="md-nav" aria-label="Adding an SQLite repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-the-recipes-id" class="md-nav__link">
    Setting the recipe’s ID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inserting-the-ingredients" class="md-nav__link">
    Inserting the ingredients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-recipes" class="md-nav__link">
    Deleting recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initializing-and-closing_1" class="md-nav__link">
    Initializing and closing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-app" class="md-nav__link">
    Running the app
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-moor-library" class="md-nav__link">
    Using the Moor Library
  </a>
  
    <nav class="md-nav" aria-label="Using the Moor Library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-classes" class="md-nav__link">
    Database classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-tables_1" class="md-nav__link">
    Creating tables
  </a>
  
    <nav class="md-nav" aria-label="Creating tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-the-ingredient-table" class="md-nav__link">
    Defining the Ingredient table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-database-class" class="md-nav__link">
    Creating the database class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-dao-classes" class="md-nav__link">
    Creating the DAO classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-the-part-file" class="md-nav__link">
    Generating the part file
  </a>
  
    <nav class="md-nav" aria-label="Generating the part file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-your-moor-recipes" class="md-nav__link">
    Converting your Moor recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-classes-for-ingredients" class="md-nav__link">
    Creating classes for Ingredients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-watchallrecipes" class="md-nav__link">
    Updating watchAllRecipes()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-moor-repository" class="md-nav__link">
    Creating the Moor repository
  </a>
  
    <nav class="md-nav" aria-label="Creating the Moor repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementing-the-repository" class="md-nav__link">
    Implementing the repository
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-recipes_1" class="md-nav__link">
    Finding recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inserting-recipes" class="md-nav__link">
    Inserting recipes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting" class="md-nav__link">
    Deleting
  </a>
  
    <nav class="md-nav" aria-label="Deleting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replacing-the-repository" class="md-nav__link">
    Replacing the repository
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-app_1" class="md-nav__link">
    Running the app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning-up-optional" class="md-nav__link">
    Cleaning up (Optional)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-points" class="md-nav__link">
    Key points
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-to-go-from-here" class="md-nav__link">
    Where to go from here?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="15-saving-data-with-sqlite">15 Saving Data With SQLite<a class="headerlink" href="#15-saving-data-with-sqlite" title="Permanent link">&para;</a></h1>
<p>So far, you have a great app that can search the internet for recipes, bookmark the ones you want to make and show a list of ingredients to buy at the store. But what happens if you close the app, go to the store and try to look up your ingredients? They’re gone! As you might have guessed, having an in-memory repository means that the data doesn’t persist after your app closes.</p>
<p>One of the best ways to persist data is with a database. Both Android and iOS provide access to the <strong>SQLite</strong> database system. This allows you to insert, read, update and remove structured data that are persisted on disk.</p>
<p>In this chapter, you’ll learn about using the <strong>sqflite</strong> plugin and the <strong>Moor</strong> and <strong>sqlbrite</strong> packages.</p>
<p>By the end of the chapter, you’ll know:</p>
<ul>
<li>How to create SQLite-based databases.</li>
<li>How to insert, fetch and remove recipes or ingredients.</li>
<li>How to use the sqflite plugin.</li>
<li>How to use the sqlbrite library and receive updates via streams.</li>
<li>How to leverage the features of the Moor library when working with databases.</li>
</ul>
<h2 id="databases">Databases<a class="headerlink" href="#databases" title="Permanent link">&para;</a></h2>
<p>Databases have been around for a long time, but being able to put a full-blown database on a phone is pretty amazing.</p>
<p>What <em>is</em> a database? Think of it like a file cabinet that contains folders with sheets of paper in them. A database has tables (file folders) that store data (sheets of paper).</p>
<p><img alt="img" src="../../images/297.png" /></p>
<p>Database tables have columns that define data, which is then stored in rows. One of the most popular languages for managing databases is Structured Query Language, commonly known as <strong>SQL</strong>.</p>
<p>You use SQL commands to get the data in and out of the database. In this chapter, you’ll learn about SQL commands that create SQL statements that:</p>
<ol>
<li>Manage a database.</li>
<li>Manage data in the database’s tables.</li>
</ol>
<h3 id="using-sql">Using SQL<a class="headerlink" href="#using-sql" title="Permanent link">&para;</a></h3>
<p>The SQLite database system on Android and iOS is an embedded engine that runs in the same process as the app. SQLite is lightweight, taking up less than 500 Kb on most systems.</p>
<p>When SQLite creates a database, it stores it in one file inside an app. These files are cross-platform, meaning you can pull a file off a phone and read it on a regular computer.</p>
<p>Unlike a database server, SQLite needs no server configuration or server process.</p>
<p>While SQLite is small and runs fast, it still requires some knowledge of the SQL language and how to create databases, tables and execute SQL commands.</p>
<h3 id="writing-queries">Writing queries<a class="headerlink" href="#writing-queries" title="Permanent link">&para;</a></h3>
<p>One of the most important parts of SQL is writing a query. To make a query, use the <code>SELECT</code>command followed by any columns you want the database to return, then the table name. For example:</p>
<div class="highlight"><pre><span></span><code>// 1
SELECT name, address FROM Customers;
// 2
SELECT * FROM Customers;
// 3
SELECT name, address FROM Customers WHERE name LIKE &#39;A%&#39;;
</code></pre></div>
<p>Here’s what’s happening in the code above:</p>
<ol>
<li>Returns the name and address columns from the <code>CUSTOMERS</code> table.</li>
<li>Using <code>*</code>, returns all columns from the specified table.</li>
<li>Uses <code>WHERE</code> to filter the returned data. In this case, it only returns data where <code>NAME</code>starts with <code>A</code>.</li>
</ol>
<h3 id="adding-data">Adding data<a class="headerlink" href="#adding-data" title="Permanent link">&para;</a></h3>
<p>You can add data using the <code>INSERT</code> statement:</p>
<div class="highlight"><pre><span></span><code>INSERT INTO Customers (NAME, ADDRESS) VALUES (value1, value2);
</code></pre></div>
<p>While you don’t have to list all the columns, if you want to add all the values, the values must be in the order you used to define the columns. It’s a best practice to list the column names whenever you insert data. That makes it easier to update your values list if, say, you add a column in the middle.</p>
<h3 id="deleting-data">Deleting data<a class="headerlink" href="#deleting-data" title="Permanent link">&para;</a></h3>
<p>To delete data, use the <code>DELETE</code> statement:</p>
<div class="highlight"><pre><span></span><code>DELETE FROM Customers WHERE id = 1;
</code></pre></div>
<p>If you don’t use the <code>WHERE</code> clause, you’ll delete all the data from the table. Here, you delete the customer whose <code>id</code> equals 1. You can use broader conditions of course. For example, you might delete all the customers with a given city.</p>
<h3 id="updating-data">Updating data<a class="headerlink" href="#updating-data" title="Permanent link">&para;</a></h3>
<p>You use <code>UPDATE</code> to update your data. You won’t need this command for this app, but for reference, the syntax is:</p>
<div class="highlight"><pre><span></span><code>UPDATE customers
SET
  phone = &#39;555-12345&#39;,
WHERE id = 1;
</code></pre></div>
<p>This updates the phone number of the customer whose <code>id</code> equals 1.</p>
<p>To store recipes and ingredients in a database, you’ll start by adding two new libraries to your app: <strong>sqflite</strong> and <strong>sqlbrite</strong>.</p>
<h3 id="sqflite">sqflite<a class="headerlink" href="#sqflite" title="Permanent link">&para;</a></h3>
<p>The sqflite plugin provides SQLite database access on iOS, Android and macOS. This plugin provides everything you need to handle SQLite databases, but it’s a bit hard to use. Later, you’ll use the Moor package, which makes things easier. First, however, it’s important to learn how to use the underlying plugin.</p>
<blockquote>
<p><strong>Note</strong>: sqflite is a plugin package because it requires a Dart API and platform-specific code.</p>
</blockquote>
<p>With sqflite, you need to manually create all the database’s tables and put SQL statements together by hand.</p>
<p>To start, you need to create the database and then create the table(s). This means you need to understand SQL’s <code>CREATE TABLE</code>. Here’s how it looks:</p>
<div class="highlight"><pre><span></span><code>CREATE TABLE mytable (
  id INTEGER PRIMARY KEY,
  name TEXT,
  value INTEGER,
  NUM REAL
);
</code></pre></div>
<p>This creates a table named <code>mytable</code> with the following columns:</p>
<ul>
<li><strong>id</strong>: Defined as an integer, it’s also the primary key.</li>
<li><strong>name</strong>: A string.</li>
<li><strong>value</strong>: An integer.</li>
<li><strong>num</strong>: Of type <code>REAL</code>, this is stored as an 8-byte floating-point value.</li>
</ul>
<p>A primary key is very important because it makes each row unique. This way, you can easily find or delete entries by using the <code>id</code> column.</p>
<p>Once you have a reference to the database, you can insert, delete, update or query its table(s). When you query the database, you’ll get a <code>List&lt;Map&lt;String, dynamic&gt;&gt;</code> back. You then need to take each item in the <code>List</code> and use a function to convert the <code>Map</code> into a class. This is similar to how you convert JSON into classes.</p>
<h3 id="sqlbrite">sqlbrite<a class="headerlink" href="#sqlbrite" title="Permanent link">&para;</a></h3>
<p>The sqlbrite library is a reactive stream wrapper around sqflite. It allows you to set up streams so you can receive events when there’s a change in your database. In the previous chapter, you created <code>watchAllRecipes()</code> and <code>watchAllIngredients()</code>, which return a <code>Stream</code>. To create these streams from a database, sqlbrite uses <code>watch()</code> methods.</p>
<h2 id="adding-a-database-to-the-project">Adding a database to the project<a class="headerlink" href="#adding-a-database-to-the-project" title="Permanent link">&para;</a></h2>
<p>If you’re following along with your app, open it and keep using it with this chapter. If not, locate the <strong>projects</strong> folder for this chapter and open the <strong>starter</strong> folder.</p>
<blockquote>
<p><strong>Note</strong>: If you use the starter app, don’t forget to add your <strong>apiKey</strong> and <strong>apiId</strong> in <strong>network/recipe_service.dart</strong>.</p>
</blockquote>
<p>Your app manages two types of data: recipes and ingredients, which you’ll model according to this diagram:</p>
<p><img alt="img" src="../../images/298.png" /></p>
<p>In this chapter, you’ll implement two different solutions: one with sqflite and one with Moor. This will give you the experience to decide which one you prefer. You’ll then swap the memory repository for the new database repository.</p>
<h3 id="adding-sqflite">Adding sqflite<a class="headerlink" href="#adding-sqflite" title="Permanent link">&para;</a></h3>
<p>To use the sqflite plugin, open <strong>pubspec.yaml</strong> and add the following packages after the <strong>equatable</strong>package:</p>
<div class="highlight"><pre><span></span><code>sqflite: ^2.0.3+1
path_provider: ^2.0.11
synchronized: ^3.0.0+3
sqlbrite: ^2.3.0
path: ^1.8.2
</code></pre></div>
<p>These packages provide the following:</p>
<ol>
<li><strong>sqflite</strong>: Provides SQLite database access.</li>
<li><strong>path_provider</strong>: Simplifies dealing with common file system locations.</li>
<li><strong>synchronized</strong>: Helps implement lock mechanisms to prevent concurrent access, when needed.</li>
<li><strong>sqlbrite</strong>: Reactive wrapper around sqflite that receives changes happening in the database via streams.</li>
<li><strong>path</strong>: is a library that helps manipulating file paths.</li>
</ol>
<p>Run <strong>Pub Get</strong>. Now, you’re ready to create your first database.</p>
<h3 id="setting-up-the-database">Setting up the database<a class="headerlink" href="#setting-up-the-database" title="Permanent link">&para;</a></h3>
<p>In the <strong>data</strong> folder, create a new folder named <strong>sqlite</strong>. Inside that folder, create a new file called <strong>database_helper.dart</strong>. This class will handle all the SQLite database operations.</p>
<p>Start by adding all the imports you’ll need:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:path/path.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:sqflite/sqflite.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:path_provider/path_provider.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:sqlbrite/sqlbrite.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:synchronized/synchronized.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../models/models.dart&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>This provides access to all your packages.</p>
<p>Now, define the class:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">DatabaseHelper</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Next, define some fields and constants:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">_databaseName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;MyRecipes.db&#39;</span><span class="p">;</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">_databaseVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>

<span class="c1">// 2</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">recipeTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Recipe&#39;</span><span class="p">;</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ingredientTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Ingredient&#39;</span><span class="p">;</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">recipeId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;recipeId&#39;</span><span class="p">;</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ingredientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ingredientId&#39;</span><span class="p">;</span><span class="w"></span>

<span class="c1">// 3</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="kd">late</span><span class="w"> </span><span class="n">BriteDatabase</span><span class="w"> </span><span class="n">_streamDatabase</span><span class="p">;</span><span class="w"></span>

<span class="c1">// make this a singleton class</span><span class="w"></span>
<span class="c1">// 4</span><span class="w"></span>
<span class="n">DatabaseHelper</span><span class="p">.</span><span class="n">_privateConstructor</span><span class="p">();</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DatabaseHelper</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DatabaseHelper</span><span class="p">.</span><span class="n">_privateConstructor</span><span class="p">();</span><span class="w"></span>
<span class="c1">// 5</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Lock</span><span class="p">();</span><span class="w"></span>

<span class="c1">// only have a single app-wide reference to the database</span><span class="w"></span>
<span class="c1">// 6</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">Database</span><span class="o">?</span><span class="w"> </span><span class="n">_database</span><span class="p">;</span><span class="w"></span>

<span class="c1">// TODO: Add create database code here</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s happening in the code:</p>
<ol>
<li>Constants for the database name and version.</li>
<li>Define the names of the tables.</li>
<li>Your sqlbrite database instance. <code>late</code> indicates the variable is non-nullable and that it will be initialized after it’s been declared.</li>
<li>Make the constructor private and provide a public static <code>instance</code>.</li>
<li>Define <code>lock</code>, which you’ll use to prevent concurrent access.</li>
<li>Private sqflite database instance.</li>
</ol>
<p>You need to create the database once, then you can access it through your <code>instance</code>. This prevents other classes from creating multiple instances of the helper and initializing the database more than once.</p>
<h3 id="creating-tables">Creating tables<a class="headerlink" href="#creating-tables" title="Permanent link">&para;</a></h3>
<p>One of the most important parts of creating a database is creating the tables. Your app will have two tables: <code>recipeTable</code> and <code>ingredientTable</code>.</p>
<p>While it isn’t required, it’s a good practice for tables to have a <code>PRIMARY KEY</code>, which is a unique ID for each record or row of data. You can automatically create this ID when a new record is created.</p>
<p>The <code>TEXT</code> SQL type represents all the strings, while the <code>INTEGER</code> SQL type represents the integers.</p>
<p>Locate <code>// TODO: Add create database code here</code> and replace it with the following to create two databases:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// SQL code to create the database table</span><span class="w"></span>
<span class="c1">// 1</span><span class="w"></span>
<span class="n">Future</span><span class="w"> </span><span class="n">_onCreate</span><span class="p">(</span><span class="n">Database</span><span class="w"> </span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">version</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE </span><span class="si">$</span><span class="n">recipeTable</span><span class="s1"> (</span>
<span class="s1">          </span><span class="si">$</span><span class="n">recipeId</span><span class="s1"> INTEGER PRIMARY KEY,</span>
<span class="s1">          label TEXT,</span>
<span class="s1">          image TEXT,</span>
<span class="s1">          url TEXT,</span>
<span class="s1">          calories REAL,</span>
<span class="s1">          totalWeight REAL,</span>
<span class="s1">          totalTime REAL</span>
<span class="s1">        )</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE </span><span class="si">$</span><span class="n">ingredientTable</span><span class="s1"> (</span>
<span class="s1">          </span><span class="si">$</span><span class="n">ingredientId</span><span class="s1"> INTEGER PRIMARY KEY,</span>
<span class="s1">          </span><span class="si">$</span><span class="n">recipeId</span><span class="s1"> INTEGER,</span>
<span class="s1">          name TEXT,</span>
<span class="s1">          weight REAL</span>
<span class="s1">        )</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add code to open database</span><span class="w"></span>
</code></pre></div>
<p>In the code above, you:</p>
<ol>
<li>Pass an sqflite database <code>db</code> into the method. It will create the tables.</li>
<li>Create <code>recipeTable</code> with the same columns as the model using <code>CREATE TABLE</code>.</li>
<li>Create <code>ingredientTable</code>.</li>
</ol>
<blockquote>
<p><strong>Note</strong>: You use <code>REAL</code> for double values.</p>
</blockquote>
<p>For this example, your app’s tables only have a few columns. You can use additional statements to add more tables and/or columns, if you need to.</p>
<p>Now that you’ve created the tables, you’ll learn how to access them.</p>
<h3 id="opening-the-database">Opening the database<a class="headerlink" href="#opening-the-database" title="Permanent link">&para;</a></h3>
<p>Before you can use the database, you have to open it. <code>_initDatabase()</code> uses sqflite’s <code>openDatabase()</code>. Such method requires a path where it should create the database, the current database version and a “create” method name.</p>
<p>Replace the line that reads <code>// TODO: Add code to open database</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// this opens the database (and creates it if it doesn&#39;t exist)</span><span class="w"></span>
<span class="c1">// 1</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Database</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_initDatabase</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">documentsDirectory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">getApplicationDocumentsDirectory</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">join</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">documentsDirectory</span><span class="p">.</span><span class="n">path</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">_databaseName</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Remember to turn off debugging before deploying app to store(s).</span><span class="w"></span>
<span class="w">  </span><span class="n">Sqflite</span><span class="p">.</span><span class="n">setDebugModeOn</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">openDatabase</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">path</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="n">_databaseVersion</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">onCreate:</span><span class="w"> </span><span class="n">_onCreate</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add initialize getter here</span><span class="w"></span>
</code></pre></div>
<p>In the code above, you:</p>
<ol>
<li>Declare that the method returns a <code>Future</code>, as the operation is asynchronous.</li>
<li>Get the app document’s directory name, where you’ll store the database.</li>
<li>Create a path to the database by appending the database name to the directory path.</li>
<li>Turn on debugging. Remember to turn this off when you’re ready to deploy your app to the store(s).</li>
<li>Use sqflite’s <code>openDatabase()</code> to create and store the database file in the <code>path</code>.</li>
</ol>
<p>Next, since <code>_database</code> is private, you need to create a getter that will initialize the database. Replace <code>// TODO: Add initialize getter here</code> with this:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Database</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">database</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_database</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">_database</span><span class="o">!</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Use this object to prevent concurrent access to data</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">lock</span><span class="p">.</span><span class="n">synchronized</span><span class="p">(()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// lazily instantiate the db the first time it is accessed</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_database</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">      </span><span class="n">_database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">_initDatabase</span><span class="p">();</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 6</span><span class="w"></span>
<span class="w">      </span><span class="n">_streamDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BriteDatabase</span><span class="p">(</span><span class="n">_database</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">});</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_database</span><span class="o">!</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add getter for streamDatabase</span><span class="w"></span>
</code></pre></div>
<p>This method will open and create the database, if it hasn’t been created before. Specifically:</p>
<ol>
<li>Other methods and classes can use this getter to access (get) the database.</li>
<li>If <code>_database</code> is not <code>null</code>, it’s already been created, so you return the existing one.</li>
<li>Use <code>lock</code> to ensure that only one process can be in this section of code at a time.</li>
<li>Check to make sure the database is null.</li>
<li>Call the <code>_initDatabase()</code>, which you defined above.</li>
<li>Create a <code>BriteDatabase</code> instance, wrapping the database.</li>
</ol>
<blockquote>
<p><strong>Note</strong>: When you run the app a second time, it won’t call <code>_onCreate()</code> because the database already exists.</p>
</blockquote>
<p>Now that you have a getter for the database, create a getter for the stream database by replacing <code>// TODO: Add getter for streamDatabase</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">BriteDatabase</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">streamDatabase</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">database</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add parseRecipes here</span><span class="w"></span>
</code></pre></div>
<p>Here, you:</p>
<ol>
<li>Define an asynchronous getter method.</li>
<li>Await the result — because it also creates <code>_streamDatabase</code>.</li>
</ol>
<p>You’ll use the stream database for the stream methods in your repository, as well as to insert and delete data.</p>
<p>The infrastructure is now in place, but the database speaks SQL and your app deals with either JSON or Dart classes. It’s time to add some helper methods to convert SQL data to JSON and vice versa.</p>
<h3 id="converting-data-to-classes">Converting data to classes<a class="headerlink" href="#converting-data-to-classes" title="Permanent link">&para;</a></h3>
<p>To convert the stored map of data from the database to classes, you’ll need to add <code>fromJson()</code> and <code>toJson()</code> to the model classes.</p>
<blockquote>
<p><strong>Note</strong>: If you need more information on JSON, see Chapter 10, “Serialization With JSON”.</p>
</blockquote>
<p>Open <strong>data/models/recipe.dart</strong>. Add the following at the bottom, before the closing <code>}</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a Recipe from JSON data</span><span class="w"></span>
<span class="kd">factory</span><span class="w"> </span><span class="n">Recipe</span><span class="p">.</span><span class="n">fromJson</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">json</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Recipe</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nl">id:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;recipeId&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nl">label:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nl">image:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nl">url:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nl">calories:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;calories&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nl">totalWeight:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;totalWeight&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nl">totalTime:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;totalTime&#39;</span><span class="p">],</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="c1">// Convert our Recipe to JSON to make it easier when you store</span><span class="w"></span>
<span class="c1">// it in the database</span><span class="w"></span>
<span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toJson</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;recipeId&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;label&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">label</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;image&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;url&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;calories&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">calories</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;totalWeight&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">totalWeight</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s1">&#39;totalTime&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">totalTime</span><span class="p">,</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>These two methods convert a <code>Map&lt;String, dynamic&gt;</code> to a <code>Recipe</code> and vice versa.</p>
<p>Open <strong>data/models/ingredient.dart</strong>. Add these two methods at the bottom, before the closing <code>}</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a Ingredient from JSON data</span><span class="w"></span>
<span class="kd">factory</span><span class="w"> </span><span class="n">Ingredient</span><span class="p">.</span><span class="n">fromJson</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">json</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Ingredient</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="nl">id:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;ingredientId&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nl">recipeId:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;recipeId&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nl">name:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nl">weight:</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="c1">// Convert our Ingredient to JSON to make it easier when you</span><span class="w"></span>
<span class="c1">// store it in the database</span><span class="w"></span>
<span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toJson</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s1">&#39;ingredientId&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s1">&#39;recipeId&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">recipeId</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s1">&#39;weight&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>Similar to <code>Recipe</code>’s methods, these let you convert an <code>Ingredient</code> to a <code>Map</code> and vice versa.</p>
<p>Now, return to <strong>database_helper.dart</strong> and replace <code>// TODO: Add parseRecipes here</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="w"> </span><span class="n">parseRecipes</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">recipeList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">recipes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">recipeMap</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">recipeList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">recipe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Recipe</span><span class="p">.</span><span class="n">fromJson</span><span class="p">(</span><span class="n">recipeMap</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">    </span><span class="n">recipes</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">recipe</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">recipes</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="w"> </span><span class="n">parseIngredients</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">ingredientList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredientMap</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ingredientList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Ingredient</span><span class="p">.</span><span class="n">fromJson</span><span class="p">(</span><span class="n">ingredientMap</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ingredients</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">ingredient</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ingredients</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add findAppRecipes here</span><span class="w"></span>
</code></pre></div>
<p>In the code above, you:</p>
<ol>
<li>Iterate over a list of recipes in JSON format.</li>
<li>Convert each recipe into a <code>Recipe</code> instance.</li>
<li>Add the <code>recipe</code> to the recipe list.</li>
<li>Return the list of <code>recipes</code>.</li>
<li>Convert each ingredient in JSON format into a list of <code>Ingredient</code>s.</li>
</ol>
<p>With the conversion code in place, it’s now time to integrate it into the existing repository.</p>
<h3 id="implementing-repository-like-functions">Implementing repository-like functions<a class="headerlink" href="#implementing-repository-like-functions" title="Permanent link">&para;</a></h3>
<p>Your next step is to create functions that return the information that the repository expects. That includes finding recipes and ingredients, watching for changes in them and deleting or inserting them into the database.</p>
<p>Start with the first three methods of the repository pattern: <code>findAllRecipes()</code>, <code>watchAllRecipes()</code> and <code>watchAllIngredients()</code>. This is the pattern you’ll use:</p>
<ul>
<li>Get the database.</li>
<li>Perform the query and return the parsed results.</li>
</ul>
<p>Still in <strong>database_helper.dart</strong>, locate <code>// TODO: Add findAppRecipes here</code> and replace it with the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">recipeList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">recipeTable</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">recipes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseRecipes</span><span class="p">(</span><span class="n">recipeList</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">recipes</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add watchAllRecipes() here</span><span class="w"></span>
</code></pre></div>
<p>In this code, you:</p>
<ol>
<li>Get your database <code>instance</code>.</li>
<li>Use the database <code>query()</code> to get all the recipes. This method has other parameters, but you don’t need them here.</li>
<li>Use <code>parseRecipes()</code> to get a list of recipes.</li>
</ol>
<p>Now, you need to handle the two <code>watch()</code> methods, which are a bit different. You’ll use <code>yield*</code> with a query to create a stream and <code>async*</code> on the method name.</p>
<p>Replace <code>// TODO: Add watchAllRecipes() here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="o">*</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="kd">yield</span><span class="o">*</span><span class="w"> </span><span class="n">db</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">createQuery</span><span class="p">(</span><span class="n">recipeTable</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">mapToList</span><span class="p">((</span><span class="n">row</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Recipe</span><span class="p">.</span><span class="n">fromJson</span><span class="p">(</span><span class="n">row</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add watchAllIngredients() here</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s happening:</p>
<ol>
<li><code>yield*</code> creates a <code>Stream</code> using the query.</li>
<li>Create a query using <code>recipeTable</code>.</li>
<li>For each row, convert the row to a list of recipes.</li>
</ol>
<p>Now, for the ingredients, you need a similar method.</p>
<p>Replace <code>// TODO: Add watchAllIngredients() here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="o">*</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">yield</span><span class="o">*</span><span class="w"> </span><span class="n">db</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">createQuery</span><span class="p">(</span><span class="n">ingredientTable</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">mapToList</span><span class="p">((</span><span class="n">row</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Ingredient</span><span class="p">.</span><span class="n">fromJson</span><span class="p">(</span><span class="n">row</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add findRecipeByID() here</span><span class="w"></span>
</code></pre></div>
<p>Here you watch for results of a query to the ingredients table, which is delivered via a stream. Notice the <code>async*</code> and the <code>yield*</code> keywords used to signal a stream.</p>
<p>Now that you’ve ensured that the repository will get the data it expects, your next step is to let the user find the recipes they need.</p>
<h3 id="finding-recipes">Finding recipes<a class="headerlink" href="#finding-recipes" title="Permanent link">&para;</a></h3>
<p>After the user has added recipes, they’ll want a quick way to find the one they have in mind for dinner. That’s what you’ll work on next.</p>
<p>While you could use <code>rawQuery()</code>, which uses raw SQL commands, it’s easier to pull data from a database if you use <code>query()</code>, instead. <code>query()</code> lets you pass the columns you want to be returned and even include a <code>where</code> filter. You can also group, order or add limits with an offset.</p>
<p>To find a specific recipe, you need to query using the unique recipe ID. To enable this, replace <code>// TODO: Add findRecipeByID() here</code> with this code:</p>
<div class="highlight"><pre><span></span><code><span class="n">Future</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="w"> </span><span class="n">findRecipeById</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">recipeList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">recipeTable</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">where:</span><span class="w"> </span><span class="s1">&#39;id = </span><span class="si">$</span><span class="n">id</span><span class="s1">&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">recipes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseRecipes</span><span class="p">(</span><span class="n">recipeList</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">recipes</span><span class="p">.</span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Put findAllIngredients() here</span><span class="w"></span>
</code></pre></div>
<p>This is similar to <code>findAllRecipes()</code>; the only difference is that you pass an <code>id</code> to <code>where</code>. The query method returns a list, even when there is one item on the list.</p>
<p>Next, replace <code>// TODO: Put findAllIngredients() here</code> with <code>findAllIngredients()</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredientList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">ingredientTable</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseIngredients</span><span class="p">(</span><span class="n">ingredientList</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ingredients</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: findRecipeIngredients() goes here</span><span class="w"></span>
</code></pre></div>
<p>Here, you use <code>ingredientTable</code> and pass the results to <code>parseIngredients()</code>.</p>
<p>To find all the ingredients for a specific recipe, you need to use the where clause when searching for ingredients with a specific recipe ID. Replace <code>// TODO: findRecipeIngredients() goes here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">recipeId</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredientList</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredientTable</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">where:</span><span class="w"> </span><span class="s1">&#39;recipeId = </span><span class="si">$</span><span class="n">recipeId</span><span class="s1">&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseIngredients</span><span class="p">(</span><span class="n">ingredientList</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ingredients</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Insert methods go here</span><span class="w"></span>
</code></pre></div>
<p>Here you query the ingredients table by recipe ID, parse the results and return the list of ingredients.</p>
<h3 id="inserting-data-into-tables">Inserting data into tables<a class="headerlink" href="#inserting-data-into-tables" title="Permanent link">&para;</a></h3>
<p>The user will want to add the delicious recipes they find to the app. To let them do this, you need a way to insert data into tables.</p>
<p><strong>BriteDatabase</strong> provides <code>insert()</code>. This method takes a table name and the JSON to do the insertion. As long as the models have a <code>toJson()</code> and a <code>fromJson()</code>, you can easily write methods to insert an entry into a table.</p>
<p>Locate and replace <code>// TODO: Insert methods go here</code> with the following methods:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insert</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">table</span><span class="p">,</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">row</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">table</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">row</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insertRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">insert</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">recipeTable</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">recipe</span><span class="p">.</span><span class="n">toJson</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insertIngredient</span><span class="p">(</span><span class="n">Ingredient</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">insert</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ingredientTable</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ingredient</span><span class="p">.</span><span class="n">toJson</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Delete methods go here</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s going on in this code:</p>
<ol>
<li>Take the table name and the JSON map.</li>
<li>Use Sqlbrite’s <code>insert()</code>.</li>
<li>Return values from <code>insert()</code> using the recipe’s table and JSON data.</li>
<li>Return values from <code>insert()</code> using the ingredient’s table and JSON data.</li>
</ol>
<p>But what if the user doesn’t like the recipe they added? They need a way to remove data as well. That’s the next step.</p>
<h3 id="deleting-data_1">Deleting data<a class="headerlink" href="#deleting-data_1" title="Permanent link">&para;</a></h3>
<p>Deleting data is just as easy as inserting it; you just need the table name and a row ID. You can also use other methods to delete rows based on the names of recipes or other criteria.</p>
<p>Replace <code>// TODO: Delete methods go here</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_delete</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">table</span><span class="p">,</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">columnId</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">table</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">where:</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">$</span><span class="n">columnId</span><span class="s1"> = ?&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">whereArgs:</span><span class="w"> </span><span class="p">[</span><span class="n">id</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">recipeTable</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">recipeId</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteIngredient</span><span class="p">(</span><span class="n">Ingredient</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">ingredientTable</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">ingredientId</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteIngredients</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredientTable</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredientId</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">streamDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">db</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredientTable</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">where:</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">$</span><span class="n">recipeId</span><span class="s1"> = ?&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">whereArgs:</span><span class="w"> </span><span class="p">[</span><span class="n">id</span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add close() here</span><span class="w"></span>
</code></pre></div>
<p>Here’s what this does:</p>
<ol>
<li>Create a private function, <code>_delete()</code>, which will delete data from the <code>table</code> with the provided column and row <code>id</code>.</li>
<li>Delete a row where <code>columnId</code> equals the passed-in <code>id</code>.</li>
<li>Call <code>_delete()</code>, which deletes a recipe with the passed ID.</li>
<li>For each ingredient, delete that entry from the ingredients table.</li>
<li>Delete all ingredients that have the given <code>recipeId</code>.</li>
</ol>
<p><code>_delete()</code> and <code>deleteRecipeIngredients()</code> use the <code>where</code> and <code>whereArgs</code> parameters. If you use <code>whereArgs</code>, you need to use a <code>?</code> for each item in the list of arguments. Notice the last method. It uses <code>whereArgs: [id]</code>. This is an array of parameters. For every question mark, you need an entry in the array.</p>
<p>You could also delete a recipe based on the label string, but this causes problems if you have multiple entries with the same label.</p>
<p>You’re nearly done with the setup! You just need a way to open and close the database.</p>
<h3 id="initializing-and-closing">Initializing and closing<a class="headerlink" href="#initializing-and-closing" title="Permanent link">&para;</a></h3>
<p>SQLite databases need to be opened and closed. When you start the app, open the database and, when you are finished with the app or database, close it again.</p>
<p>Using providers is a nice way to open and close the database. Your helper class doesn’t need its own <code>init</code>, but it does have the <code>database</code> getter that needs time to open up the database. When it finishes processing, you need to close the getter.</p>
<p>Replace <code>// TODO: Add close() here</code> with your last method:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">close</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">_streamDatabase</span><span class="p">.</span><span class="n">close</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Closing <code>_streamDatabase</code> will close the regular sqflite database, as well as any subscriptions.</p>
<p>Now on to integrate the new code with the existing repository-based code.</p>
<h2 id="adding-an-sqlite-repository">Adding an SQLite repository<a class="headerlink" href="#adding-an-sqlite-repository" title="Permanent link">&para;</a></h2>
<p>Just like your <code>MemoryRepository</code>, you need a repository class for your database. You’ll create <code>SqliteRepository</code> to fulfill this need.</p>
<p><img alt="img" src="../../images/299.png" /></p>
<p>This class will implement the <code>Repository</code> interface.</p>
<p>In the <strong>sqlite</strong> folder, create a new file called <strong>sqlite_repository.dart</strong> and add the following, ignoring the red squiggles:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:async&#39;</span><span class="p">;</span><span class="w"></span>
<span class="c1">// 1</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../repository.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;database_helper.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../models/models.dart&#39;</span><span class="p">;</span><span class="w"></span>

<span class="c1">// 2</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">SqliteRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Repository</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">dbHelper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DatabaseHelper</span><span class="p">.</span><span class="n">instance</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// TODO: Add methods to use dbHelper here</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here’s what this code does:</p>
<ol>
<li>Include helper class, models and repository interface.</li>
<li>Create a new class named <code>SqliteRepository</code> that extends <code>Repository</code>.</li>
<li>Add a <code>dbHelper</code> field, which is just a single instance of <code>DatabaseHelper</code>.</li>
</ol>
<p>Replace <code>// TODO: Add methods to use dbHelper here</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">findAllRecipes</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">watchAllRecipes</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">watchAllIngredients</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="w"> </span><span class="n">findRecipeById</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">findRecipeById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">findAllIngredients</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">recipeId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="n">recipeId</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Add recipe insert here</span><span class="w"></span>
</code></pre></div>
<p>These methods just call the helper class, but the insert methods do a bit more. To set the <code>recipeId</code> for each ingredient, you first have to insert the recipe into the database and get the returned recipe ID from the insert call. You can then set this ID on each ingredient. Those ingredients are then ready to be added to the database.</p>
<h3 id="setting-the-recipes-id">Setting the recipe’s ID<a class="headerlink" href="#setting-the-recipes-id" title="Permanent link">&para;</a></h3>
<p>If the ingredient’s <code>recipeId</code> isn’t set, the database won’t know which ingredient belongs to which recipe.</p>
<p>Replace <code>// TODO: Add recipe insert here</code> with the following method:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insertRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">(()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">insertRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">    </span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="o">!</span><span class="p">.</span><span class="n">forEach</span><span class="p">((</span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredient</span><span class="p">.</span><span class="n">recipeId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">});</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">      </span><span class="n">insertIngredients</span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 6</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">});</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Insert ingredients</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s happening:</p>
<ol>
<li>Return an asynchronous <code>Future</code>.</li>
<li>Use your helper to insert the recipe and save the <code>id</code>.</li>
<li>Set your recipe class’s <code>id</code> to this <code>id</code>.</li>
<li>Set each ingredient’s <code>recipeId</code> field to this <code>id</code>.</li>
<li>Insert all the ingredients.</li>
<li>Return the new <code>id</code>.</li>
</ol>
<p>Before you can insert the ingredient, you need to update all the ingredients’ <code>recipeId</code>s to the new ID of the inserted recipe.</p>
<h3 id="inserting-the-ingredients">Inserting the ingredients<a class="headerlink" href="#inserting-the-ingredients" title="Permanent link">&para;</a></h3>
<p>Next, you’ll insert the ingredients.</p>
<p>Replace <code>// TODO: Insert ingredients</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">insertIngredients</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">(()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredients</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredientIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">ingredients</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">Ingredient</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">futureId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">insertIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">futureId</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredientIds</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">futureId</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="p">});</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">ingredientIds</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">[]);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">});</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: Delete methods go here</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s going on:</p>
<ol>
<li>Create a list of new ingredient IDs.</li>
<li>Since you need to use <code>await</code> with <code>insertIngredient</code>, you need to wrap everything in an asynchronous <code>Future</code>. This is a bit tricky, but it allows you to wait for each ID. It returns a <code>Future</code> so the whole method can still run asynchronously.</li>
<li>Get the new ingredient’s ID.</li>
<li>Add the ID to your return list.</li>
<li>Return the list of new IDs.</li>
</ol>
<h3 id="deleting-recipes">Deleting recipes<a class="headerlink" href="#deleting-recipes" title="Permanent link">&para;</a></h3>
<p>Now that you have the delete methods in the helper class, you need to implement them in the repository. Most of these just call the helper’s methods.</p>
<p>Locate and replace <code>// TODO: Delete methods go here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">deleteRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">deleteRecipeIngredients</span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteIngredient</span><span class="p">(</span><span class="n">Ingredient</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">deleteIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteIngredients</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">deleteIngredients</span><span class="p">(</span><span class="n">ingredients</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">recipeId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">  </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">deleteRecipeIngredients</span><span class="p">(</span><span class="n">recipeId</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// TODO: initialize and close methods go here</span><span class="w"></span>
</code></pre></div>
<p>Here’s what these methods do:</p>
<ol>
<li>Call the helper’s <code>deleteRecipe()</code>.</li>
<li>Delete all of this recipe’s ingredients.</li>
<li>Delete ingredients and ignore the number of deleted rows.</li>
<li>Delete all ingredients in the list passed in.</li>
<li>Delete all ingredients with the given recipe ID.</li>
</ol>
<p>These methods just call the helper class and return an empty <code>Future</code>.</p>
<h3 id="initializing-and-closing_1">Initializing and closing<a class="headerlink" href="#initializing-and-closing_1" title="Permanent link">&para;</a></h3>
<p>Remember that databases need to be opened and closed. To do this, your repository just needs to call <code>dbHelper</code>’s methods.</p>
<p>Replace <code>// TODO: initialize and close methods go here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="w"> </span><span class="n">init</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">database</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="n">close</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="n">dbHelper</span><span class="p">.</span><span class="n">close</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>In this code, you:</p>
<ol>
<li>Await for the database to initialize.</li>
<li>Call the helper’s <code>close()</code> method.</li>
</ol>
<h2 id="running-the-app">Running the app<a class="headerlink" href="#running-the-app" title="Permanent link">&para;</a></h2>
<p>After all that work, it’s time to see your changes. For your last change before you run, open <strong>main.dart</strong>.</p>
<p>First, import the new repository:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;data/sqlite/sqlite_repository.dart&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Second, initialize the repository in <code>main()</code> and pass that repository to the widget by replacing the line that reads <code>runApp(const MyApp());</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="kd">final</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqliteRepository</span><span class="p">();</span><span class="w"></span>
<span class="kd">await</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="n">init</span><span class="p">();</span><span class="w"></span>

<span class="n">runApp</span><span class="p">(</span><span class="n">MyApp</span><span class="p">(</span><span class="nl">repository:</span><span class="w"> </span><span class="n">repository</span><span class="p">));</span><span class="w"></span>
</code></pre></div>
<p>These lines use <code>await</code> to wait for the repository to initialize, then run the app.</p>
<p>At the top of <code>MyApp</code>, add a new repository field by replacing <code>const MyApp({Key? key}) : super(key: key);</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="kd">final</span><span class="w"> </span><span class="n">Repository</span><span class="w"> </span><span class="n">repository</span><span class="p">;</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">MyApp</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="n">Key</span><span class="o">?</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">repository</span><span class="p">,</span><span class="w"></span>
<span class="p">})</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">key:</span><span class="w"> </span><span class="n">key</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Scroll down and find a line that reads <code>create: (_) =&gt; MemoryRepository(),</code>. Replace it with:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="nl">create:</span><span class="w"> </span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">repository</span><span class="p">,</span><span class="w"></span>
<span class="c1">// 2</span><span class="w"></span>
<span class="nl">dispose:</span><span class="w"> </span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">Repository</span><span class="w"> </span><span class="n">repository</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="n">close</span><span class="p">(),</span><span class="w"></span>
</code></pre></div>
<p>Here’s what this code does:</p>
<ol>
<li><code>create</code> passes in <code>repository</code> (the repository was created earlier).</li>
<li><code>dispose</code> calls <code>close()</code> to close the database.</li>
</ol>
<p>Stop and restart the app and search for <strong>pastas</strong>. You’ll see something like:</p>
<p><img alt="img" src="../../images/300.png" /></p>
<p>Click the first entry. You’ll see a details page, similar to this:</p>
<p><img alt="img" src="../../images/301.png" /></p>
<p>Clicking the <strong>Bookmark</strong> button will bring you back to the <strong>Recipes</strong> tab. Now, select the <strong>Bookmarks</strong>tab, and check that it displays the recipe you just bookmarked.</p>
<p><img alt="img" src="../../images/302.png" /></p>
<p>Now, tap the <strong>Groceries</strong> tab and you’ll see the grocery list with the ingredients for your bookmarked recipe:</p>
<p><img alt="img" src="../../images/303.png" /></p>
<p>Stop the app by clicking the red <strong>Stop</strong> button in Android Studio and build and run again.</p>
<p>You’ll now see the same bookmarks and groceries as before. Phew! That was a lot of work, but you did it. Pretty amazing!</p>
<p>All the recipes that you bookmarked are saved in the database and will be available each time you run the app.</p>
<p>Congratulations, you achieved the first milestone! Is there something to improve? Is there a simpler and more maintainable way to achieve the same result? Yes, there is. In the next section, you’ll see how to use Moor.</p>
<h2 id="using-the-moor-library">Using the Moor Library<a class="headerlink" href="#using-the-moor-library" title="Permanent link">&para;</a></h2>
<p>As you saw, that was a lot of work. Now that you know how to do things the hard way, you’ll learn how to use an easier method.</p>
<p>Moor is a package that’s intentionally similar to the <strong>Room</strong> library on Android. In fact, Moor is just <strong>Room</strong> spelled backward.</p>
<p>Unlike sqflite, you don’t need to write SQL code and the setup is a lot easier. You’ll write specific Dart classes and Moor will take care of the necessary translations to and from SQL code.</p>
<p>You need one file for dealing with the database and one for the repository. To start, add Moor to <strong>pubspec.yaml</strong>, after <code>path</code>:</p>
<div class="highlight"><pre><span></span><code>moor_flutter: ^4.1.0
</code></pre></div>
<p>Next, add the Moor generator, which will write code for you, in the <code>dev_dependencies</code> section after <code>chopper_generator</code>:</p>
<div class="highlight"><pre><span></span><code>moor_generator: ^4.6.0+1
</code></pre></div>
<p>Finally, run any of the following:</p>
<ul>
<li><code>flutter pub get</code> from Terminal</li>
<li><strong>Pub get</strong> from the IDE window</li>
<li><strong>Tools ▸ Flutter ▸ Flutter Pub Get</strong></li>
</ul>
<h3 id="database-classes">Database classes<a class="headerlink" href="#database-classes" title="Permanent link">&para;</a></h3>
<p>For your next step, you need to create a set of classes that will describe and create the database, tables and Data Access Objects (DAOs).</p>
<p><img alt="img" src="../../images/304.png" /></p>
<p><code>Table</code> and <code>DatabaseAccessor</code> are from Moor. You’ll create the other classes.</p>
<blockquote>
<p><strong>Note</strong>: A DAO is a class that is in charge of accessing data from the database. It’s used to separate your business logic code (e.g., the one that fetches the ingredients of a recipe) from the details of the persistence layer (SQLite in this case). A DAO can be a class, an interface or an abstract class. In this chapter, you’ll implement DAOs using classes.</p>
</blockquote>
<p>Create a new folder inside <strong>data</strong> called <strong>moor</strong>. Inside <strong>moor</strong>, create a file called <strong>moor_db.dart</strong> and add the following imports:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:moor_flutter/moor_flutter.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../models/models.dart&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>This will add Moor and your models.</p>
<p>Now, add a <code>part</code> statement:</p>
<div class="highlight"><pre><span></span><code><span class="k">part</span><span class="w"> </span><span class="s1">&#39;moor_db.g.dart&#39;</span><span class="p">;</span><span class="w"></span>

<span class="c1">// TODO: Add MoorRecipe table definition here</span><span class="w"></span>

<span class="c1">// TODO: Add MoorIngredient table definition here</span><span class="w"></span>

<span class="c1">// TODO: Add @UseMoor() and RecipeDatabase() here</span><span class="w"></span>

<span class="c1">// TODO: Add RecipeDao here</span><span class="w"></span>

<span class="c1">// TODO: Add IngredientDao</span><span class="w"></span>

<span class="c1">// TODO: Add moorRecipeToRecipe here</span><span class="w"></span>

<span class="c1">// TODO: Add MoorRecipeData here</span><span class="w"></span>

<span class="c1">// TODO: Add moorIngredientToIngredient and MoorIngredientCompanion here</span><span class="w"></span>
</code></pre></div>
<p>Remember, this is a way to combine one file into another to form a whole file. The Moor generator will create this file for you later, when you run the <code>build_runner</code> command. Until then, it’ll display a red squiggle.</p>
<h3 id="creating-tables_1">Creating tables<a class="headerlink" href="#creating-tables_1" title="Permanent link">&para;</a></h3>
<p>To create a table in Moor, you need to create a class that extends <code>Table</code>. To define the table, you just use <code>get</code> calls that define the columns for the table.</p>
<p>Still in <strong>moor_db.dart</strong>, replace <code>// TODO: Add MoorRecipe table definition here</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">MoorRecipe</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">().</span><span class="n">autoIncrement</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">RealColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">calories</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">real</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">RealColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">totalWeight</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">real</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">RealColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">totalTime</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">real</span><span class="p">()();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here’s what you do in this code:</p>
<ol>
<li>Create a class named <code>MoorRecipe</code> that extends <code>Table</code>.</li>
<li>You want a column named <code>id</code> that is an integer. <code>autoIncrement()</code> automatically creates the IDs for you.</li>
<li>Create a label column made up of text.</li>
</ol>
<p>This definition is a bit unusual. You first define the column type with type classes that handle different types:</p>
<ul>
<li><strong>IntColumn</strong>: Integers.</li>
<li><strong>BoolColumn</strong>: Booleans.</li>
<li><strong>TextColumn</strong>: Text.</li>
<li><strong>DateTimeColumn</strong>: Dates.</li>
<li><strong>RealColumn</strong>: Doubles.</li>
<li><strong>BlobColumn</strong>: Arbitrary blobs of data.</li>
</ul>
<p>It also uses a “double” method call, where each call returns a builder. For example, to create <code>IntColumn</code>, you need to make a final call with the extra <code>()</code> to create it.</p>
<h4 id="defining-the-ingredient-table">Defining the Ingredient table<a class="headerlink" href="#defining-the-ingredient-table" title="Permanent link">&para;</a></h4>
<p>Now, find and replace <code>// TODO: Add MoorIngredient table definition here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MoorIngredient</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">().</span><span class="n">autoIncrement</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">recipeId</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span><span class="w"></span>

<span class="w">  </span><span class="n">RealColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">real</span><span class="p">()();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This is similar to the sqflite <code>recipe</code> table.</p>
<p>Now, for the fun part: creating the database class.</p>
<h4 id="creating-the-database-class">Creating the database class<a class="headerlink" href="#creating-the-database-class" title="Permanent link">&para;</a></h4>
<p>Moor uses annotations. The first one you need is <code>@UseMoor</code>. This specifies the tables and Data Access Objects (DAO) to use.</p>
<p>Still in <strong>moor_db.dart</strong>, add this class with the annotation by replacing <code>// TODO: Add @UseMoor and RecipeDatabase() here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="nd">@UseMoor</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="nl">tables:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">MoorRecipe</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">MoorIngredient</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nl">daos:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">RecipeDao</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">IngredientDao</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
<span class="c1">// 2</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">RecipeDatabase</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">_$RecipeDatabase</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">RecipeDatabase</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="n">FlutterQueryExecutor</span><span class="p">.</span><span class="n">inDatabaseFolder</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="nl">path:</span><span class="w"> </span><span class="s1">&#39;recipes.sqlite&#39;</span><span class="p">,</span><span class="w"> </span><span class="nl">logStatements:</span><span class="w"> </span><span class="kc">true</span><span class="p">));</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">schemaVersion</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here’s what the code above does:</p>
<ol>
<li>Describe the tables — which you defined above — and DAOs this database will use. You’ll create the DAOs next.</li>
<li>Extend <code>_$RecipeDatabase</code>, which the Moor generator will create. This doesn’t exist yet, but the <code>part</code> command at the top will include it.</li>
<li>When creating the class, call the super class’s constructor. This uses the built-in Moor query executor and passes the pathname of the file. It also sets logging to <code>true</code>.</li>
<li>Set the database or schema version to <code>1</code>.</li>
</ol>
<p>Now, if you compare this class to what you did for sqflite, you’ll notice that it’s much simpler and doesn’t involve any SQL statements. Starting to notice the advantages of using Moor? :]</p>
<p>There is still a bit more to do. You need to create DAOs, which are classes that are specific to a table and allow you to call methods to access that table. They’re similar to the methods in <code>DatabaseHelper</code> and have the same names.</p>
<h3 id="creating-the-dao-classes">Creating the DAO classes<a class="headerlink" href="#creating-the-dao-classes" title="Permanent link">&para;</a></h3>
<p>Your first step is to create the <code>RecipeDao</code> class. You’ll see more red squiggles, just ignore them for now. With <strong>moor_db.dart</strong> still open, replace <code>// TODO: Add RecipeDao here</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="nd">@UseDao</span><span class="p">(</span><span class="nl">tables:</span><span class="w"> </span><span class="p">[</span><span class="n">MoorRecipe</span><span class="p">])</span><span class="w"></span>
<span class="c1">// 2</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">RecipeDao</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">DatabaseAccessor</span><span class="o">&lt;</span><span class="n">RecipeDatabase</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">_$RecipeDaoMixin</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">RecipeDatabase</span><span class="w"> </span><span class="n">db</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">RecipeDao</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">db</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="n">db</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorRecipeData</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="n">moorRecipe</span><span class="p">).</span><span class="kd">get</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">  </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="c1">// TODO: Add watchAllRecipes code here</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 6</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorRecipeData</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findRecipeById</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">moorRecipe</span><span class="p">)..</span><span class="n">where</span><span class="p">((</span><span class="n">tbl</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">tbl</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))).</span><span class="kd">get</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 7</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insertRecipe</span><span class="p">(</span><span class="n">Insertable</span><span class="o">&lt;</span><span class="n">MoorRecipeData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="n">into</span><span class="p">(</span><span class="n">moorRecipe</span><span class="p">).</span><span class="n">insert</span><span class="p">(</span><span class="n">recipe</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 8</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="w"> </span><span class="n">deleteRecipe</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="n">delete</span><span class="p">(</span><span class="n">moorRecipe</span><span class="p">)..</span><span class="n">where</span><span class="p">((</span><span class="n">tbl</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">tbl</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))).</span><span class="n">go</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s going on:</p>
<ol>
<li><code>@UseDao</code> specifies the following class is a DAO class for the <code>MoorRecipe</code> table.</li>
<li>Create the DAO class that extends the Moor <code>DatabaseAccessor</code> with the mixin, <code>_$RecipeDaoMixin</code>.</li>
<li>Create a field to hold an instance of your database.</li>
<li>Use a simple <code>select()</code> query to find all recipes.</li>
<li>Define <code>watchAllRecipes()</code>, but skip the implementation for now.</li>
<li>Define a more complex query that uses <code>where</code> to fetch recipes by ID.</li>
<li>Use <code>into()</code> and <code>insert()</code> to add a new recipe.</li>
<li>Use <code>delete()</code> and <code>where()</code> to delete a specific recipe.</li>
</ol>
<p>In some ways, Moor is a bit more complex than sqflite, but it also doesn’t require as much setup. Most of these calls are one-liners and quite easy to read.</p>
<p>Inserting data is pretty simple. Just specify the table and pass in the class. Notice that you’re not passing the model recipe, you’re passing <code>Insertable</code>, which is an interface that Moor requires. When you generate the <code>part</code> file, you’ll see a new class, <code>MoorRecipeData</code>, which implements this interface.</p>
<p>Deleting requires the table and a <code>where</code>. This function just returns <code>true</code> for those rows you want to delete. Instead of <code>get()</code>, you use <code>go()</code>.</p>
<p>Now, replace <code>// TODO: Add IngredientDao</code> with the following. Again ignoring the red squiggles. They’ll go away when all the new classes are in place.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="nd">@UseDao</span><span class="p">(</span><span class="nl">tables:</span><span class="w"> </span><span class="p">[</span><span class="n">MoorIngredient</span><span class="p">])</span><span class="w"></span>
<span class="c1">// 2</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">IngredientDao</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">DatabaseAccessor</span><span class="o">&lt;</span><span class="n">RecipeDatabase</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="kd">with</span><span class="w"> </span><span class="n">_$IngredientDaoMixin</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">RecipeDatabase</span><span class="w"> </span><span class="n">db</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">IngredientDao</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">db</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="n">db</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorIngredientData</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="n">select</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">).</span><span class="kd">get</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorIngredientData</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="n">select</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">).</span><span class="n">watch</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorIngredientData</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">)..</span><span class="n">where</span><span class="p">((</span><span class="n">tbl</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">tbl</span><span class="p">.</span><span class="n">recipeId</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))).</span><span class="kd">get</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insertIngredient</span><span class="p">(</span><span class="n">Insertable</span><span class="o">&lt;</span><span class="n">MoorIngredientData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="n">into</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">).</span><span class="n">insert</span><span class="p">(</span><span class="n">ingredient</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// 6</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="w"> </span><span class="n">deleteIngredient</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">      </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">((</span><span class="n">delete</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">)..</span><span class="n">where</span><span class="p">((</span><span class="n">tbl</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">          </span><span class="n">tbl</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">id</span><span class="p">))).</span><span class="n">go</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s going on above:</p>
<ol>
<li>Similar to <code>RecipeDao</code>, you define the table to use.</li>
<li>Extend <code>DatabaseAccessor</code> with <code>_$IngredientDaoMixin</code>.</li>
<li>Call <code>watch()</code> to create a stream.</li>
<li>Use <code>where()</code> to select all ingredients that match the recipe ID.</li>
<li>Use <code>into()</code> and <code>insert()</code> to add a new ingredient.</li>
<li>Use <code>delete()</code> plus <code>where()</code> to delete a specific ingredient.</li>
</ol>
<p>Now it’s time to generate the part file.</p>
<h3 id="generating-the-part-file">Generating the part file<a class="headerlink" href="#generating-the-part-file" title="Permanent link">&para;</a></h3>
<p>Now, you need to create the Moor part file. In Terminal, run:</p>
<div class="highlight"><pre><span></span><code>flutter pub run build_runner build --delete-conflicting-outputs
</code></pre></div>
<p>This generates <strong>moor_db.g.dart</strong>.</p>
<blockquote>
<p><strong>Note</strong>: <code>--delete-conflicting-outputs</code> deletes previously generated files, then rebuilds them.</p>
</blockquote>
<p>After the file has been generated, open <strong>moor_db.g.dart</strong> and take a look. It’s a very large file. It generated several classes, saving you a lot of work!</p>
<blockquote>
<p><strong>Note</strong>: If Android Studio doesn’t detect the presence of the newly generated <strong>moor_db.g.dart</strong> file, right-click on the lib folder and select <strong>Reload from Disk</strong>.</p>
</blockquote>
<p>Now that you’ve defined these tables, you need to create methods that convert your database classes to your regular model classes and back.</p>
<h4 id="converting-your-moor-recipes">Converting your Moor recipes<a class="headerlink" href="#converting-your-moor-recipes" title="Permanent link">&para;</a></h4>
<p>At the end of <strong>moor_db.dart</strong>, replace <code>// TODO: Add moorRecipeToRecipe here</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Conversion Methods</span><span class="w"></span>
<span class="n">Recipe</span><span class="w"> </span><span class="n">moorRecipeToRecipe</span><span class="p">(</span><span class="n">MoorRecipeData</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Recipe</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nl">id:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">label:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">label</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">image:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">url:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">url</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">calories:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">calories</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">totalWeight:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">totalWeight</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">totalTime:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">totalTime</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This converts a Moor recipe to a model recipe.</p>
<p>The next method converts <code>Recipe</code> to a class that you can insert into a Moor database. Replace <code>// TODO: Add MoorRecipeData here</code> with this:</p>
<div class="highlight"><pre><span></span><code><span class="n">Insertable</span><span class="o">&lt;</span><span class="n">MoorRecipeData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">recipeToInsertableMoorRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">MoorRecipeCompanion</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nl">label:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">label</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">image:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">url:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">url</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">calories:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">calories</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">totalWeight:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">totalWeight</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">totalTime:</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">totalTime</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><code>Insertable</code> is an interface for objects that can be inserted into the database or updated. Use the generated <code>MoorRecipeCompanion.insert()</code> to create that class.</p>
<h4 id="creating-classes-for-ingredients">Creating classes for Ingredients<a class="headerlink" href="#creating-classes-for-ingredients" title="Permanent link">&para;</a></h4>
<p>Next, you’ll do the same for the ingredients models. Replace <code>// TODO: Add moorIngredientToIngredient and MoorIngredientCompanion here</code> with the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">Ingredient</span><span class="w"> </span><span class="n">moorIngredientToIngredient</span><span class="p">(</span><span class="n">MoorIngredientData</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Ingredient</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nl">id:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">recipeId:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">recipeId</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">name:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">weight:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">weight</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">MoorIngredientCompanion</span><span class="w"> </span><span class="n">ingredientToInsertableMoorIngredient</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">Ingredient</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">MoorIngredientCompanion</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="nl">recipeId:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">recipeId</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nl">name:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nl">weight:</span><span class="w"> </span><span class="n">ingredient</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>These methods convert a Moor ingredient into an instance of <code>Ingredient</code> and vice versa.</p>
<h4 id="updating-watchallrecipes">Updating watchAllRecipes()<a class="headerlink" href="#updating-watchallrecipes" title="Permanent link">&para;</a></h4>
<p>Now that you’ve written the conversion methods, you can update <code>watchAllRecipes()</code>.</p>
<p>You’ll notice most of the red squiggles in <strong>data/moor/moor_db.dart</strong> are now gone. There’s one left.</p>
<blockquote>
<p><strong>Note</strong>: Run <code>flutter clean</code> and <code>flutter pub get</code> in case your IDE is not up to date with the newly generated files.</p>
</blockquote>
<p>Locate <code>// TODO: Add watchAllRecipes code here</code> and replace it with:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1</span><span class="w"></span>
<span class="k">return</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="n">moorRecipe</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="n">watch</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">rows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">recipes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">rows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">recipe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">moorRecipeToRecipe</span><span class="p">(</span><span class="n">row</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 6</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">recipes</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">recipe</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">        </span><span class="n">recipes</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">recipe</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">recipes</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Here’s the step-by-step:</p>
<ol>
<li>Use <code>select()</code> to start a query.</li>
<li>Create a stream.</li>
<li>Map each list of rows.</li>
<li>For each row, execute the code below.</li>
<li>Convert the recipe row to a regular recipe.</li>
<li>If your list doesn’t already contain the recipe, create an empty ingredient list and add it to your recipes list.</li>
</ol>
<p>In addition to creating a stream with <code>watch()</code>, you map the results into a model recipe and add an empty ingredient list. You then return the list of recipes.</p>
<p>No more red squiggles. :]</p>
<h3 id="creating-the-moor-repository">Creating the Moor repository<a class="headerlink" href="#creating-the-moor-repository" title="Permanent link">&para;</a></h3>
<p>Now that you have the Moor database code written, you need to write a repository to handle it. You’ll create a class named <code>MoorRepository</code> that implements <code>Repository</code>:</p>
<p><img alt="img" src="../../images/305.png" /></p>
<p>In the <strong>moor</strong> directory, create a new file named <strong>moor_repository.dart</strong>. Add the following imports:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:async&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../models/models.dart&#39;</span><span class="p">;</span><span class="w"></span>

<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../repository.dart&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;moor_db.dart&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>This imports your models, the repository interface and your just-created <strong>moor_db.dart</strong>.</p>
<p>Next, create <code>MoorRepository</code> and some fields:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MoorRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Repository</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">RecipeDatabase</span><span class="w"> </span><span class="n">recipeDatabase</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">RecipeDao</span><span class="w"> </span><span class="n">_recipeDao</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">IngredientDao</span><span class="w"> </span><span class="n">_ingredientDao</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">  </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;?</span><span class="w"> </span><span class="n">ingredientStream</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">  </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;?</span><span class="w"> </span><span class="n">recipeStream</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// TODO: Add findAllRecipes()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add watchAllRecipes()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add watchAllIngredients()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add findRecipeById()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add findAllIngredients()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add findRecipeIngredients()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add insertRecipe()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add insertIngredients()</span><span class="w"></span>
<span class="w">  </span><span class="c1">// TODO: Add Delete methods</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="n">Future</span><span class="w"> </span><span class="n">init</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 6</span><span class="w"></span>
<span class="w">    </span><span class="n">recipeDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RecipeDatabase</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 7</span><span class="w"></span>
<span class="w">    </span><span class="n">_recipeDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">recipeDatabase</span><span class="p">.</span><span class="n">recipeDao</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">_ingredientDao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">recipeDatabase</span><span class="p">.</span><span class="n">ingredientDao</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nd">@override</span><span class="w"></span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">close</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 8</span><span class="w"></span>
<span class="w">    </span><span class="n">recipeDatabase</span><span class="p">.</span><span class="n">close</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here’s what’s happening in the code above:</p>
<ol>
<li>Stores an instance of the Moor <code>RecipeDatabase</code>.</li>
<li>Creates a private <code>RecipeDao</code> to handle recipes.</li>
<li>Creates a private <code>IngredientDao</code> that handles ingredients.</li>
<li>Creates a stream that watches ingredients.</li>
<li>Creates a stream that watches recipes.</li>
<li>Creates your database.</li>
<li>Gets instances of your DAOs.</li>
<li>Closes the database.</li>
</ol>
<h4 id="implementing-the-repository">Implementing the repository<a class="headerlink" href="#implementing-the-repository" title="Permanent link">&para;</a></h4>
<p>As you did in past chapters, you’ll now add all the missing methods following the <code>TODO:</code>indications. Replace <code>// TODO: Add findAllRecipes()</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_recipeDao</span><span class="p">.</span><span class="n">findAllRecipes</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">then</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorRecipeData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">moorRecipes</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">recipes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">moorRecipe</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">moorRecipes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 4</span><span class="w"></span>
<span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">recipe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">moorRecipeToRecipe</span><span class="p">(</span><span class="n">moorRecipe</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 5</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">recipes</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">recipe</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">recipes</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The code above does the following:</p>
<ol>
<li>Uses <code>RecipeDao</code> to find all recipes.</li>
<li>Takes the list of <code>MoorRecipeData</code> items, executing <code>then</code> after <code>findAllRecipes()</code>finishes.</li>
<li>For each recipe:</li>
<li>Converts the Moor recipe to a model recipe.</li>
<li>Calls the method to get all recipe ingredients, which you’ll define later.</li>
</ol>
<p>The next step is simple. Find <code>// TODO: Add watchAllRecipes()</code> and substitute it with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllRecipes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">recipeStream</span><span class="w"> </span><span class="o">??=</span><span class="w"> </span><span class="n">_recipeDao</span><span class="p">.</span><span class="n">watchAllRecipes</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">recipeStream</span><span class="o">!</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This just calls the same method name on the recipe DAO class, then saves an instance so you don’t create multiple streams.</p>
<p>Next, replace <code>// TODO: Add watchAllIngredients()</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">watchAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredientStream</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_ingredientDao</span><span class="p">.</span><span class="n">watchAllIngredients</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">    </span><span class="n">ingredientStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stream</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">moorIngredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">moorIngredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">moorIngredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredients</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">moorIngredientToIngredient</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">ingredients</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">},);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ingredientStream</span><span class="o">!</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This:</p>
<ol>
<li>Gets a stream of ingredients.</li>
<li>Maps each stream list to a stream of model ingredients</li>
<li>Converts each ingredient in the list to a model ingredient.</li>
</ol>
<h3 id="finding-recipes_1">Finding recipes<a class="headerlink" href="#finding-recipes_1" title="Permanent link">&para;</a></h3>
<p>The find methods are a bit easier, but they still need to convert each database class to a model class.</p>
<p>Replace <code>// TODO: Add findRecipeById()</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Recipe</span><span class="o">&gt;</span><span class="w"> </span><span class="n">findRecipeById</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_recipeDao</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">findRecipeById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="p">.</span><span class="n">then</span><span class="p">((</span><span class="n">listOfRecipes</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">moorRecipeToRecipe</span><span class="p">(</span><span class="n">listOfRecipes</span><span class="p">.</span><span class="n">first</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Since <code>findRecipeById()</code> returns a list, just take the first one and convert it.</p>
<p>Look for <code>// TODO: Add findAllIngredients()</code> and replace it with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findAllIngredients</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_ingredientDao</span><span class="p">.</span><span class="n">findAllIngredients</span><span class="p">().</span><span class="n">then</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MoorIngredientData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">moorIngredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">moorIngredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredients</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">moorIngredientToIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">ingredients</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This method is almost like <code>watchAllIngredients()</code>, except that it doesn’t use a stream.</p>
<p>Finding all the ingredients for a recipe is similar. Replace <code>// TODO: Add findRecipeIngredients()</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">recipeId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_ingredientDao</span><span class="p">.</span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="n">recipeId</span><span class="p">).</span><span class="n">then</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">listOfIngredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">listOfIngredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ingredients</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">moorIngredientToIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">ingredients</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This method finds all the ingredients associated with a single recipe. Now it’s time to look at inserting recipes.</p>
<h3 id="inserting-recipes">Inserting recipes<a class="headerlink" href="#inserting-recipes" title="Permanent link">&para;</a></h3>
<p>To insert a recipe, first you insert the recipe itself and then insert all its ingredients. Replace <code>// TODO: Add insertRecipe()</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insertRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">_recipeDao</span><span class="p">.</span><span class="n">insertRecipe</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">recipeToInsertableMoorRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">),</span><span class="w"></span>
<span class="w">      </span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="o">!</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">ingredient</span><span class="p">.</span><span class="n">recipeId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">        </span><span class="n">insertIngredients</span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">ingredients</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here you:</p>
<ol>
<li>Use the recipe DAO to insert a converted model recipe.</li>
<li>Set the recipe ID for each ingredient.</li>
<li>Insert all the ingredients. You’ll define these next.</li>
</ol>
<p>Now, it’s finally time to add methods to insert ingredients. Replace <code>// TODO: Add insertIngredients()</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">insertIngredients</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredients</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">resultIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">[];</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">moorIngredient</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">            </span><span class="n">ingredientToInsertableMoorIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// 3</span><span class="w"></span>
<span class="w">        </span><span class="n">_ingredientDao</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="n">insertIngredient</span><span class="p">(</span><span class="n">moorIngredient</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="n">then</span><span class="p">((</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">resultIds</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">id</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">resultIds</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This code:</p>
<ol>
<li>Checks to make sure you have at least one ingredient.</li>
<li>Converts the ingredient.</li>
<li>Inserts the ingredient into the database and adds a new ID to the list.</li>
</ol>
<p>Now it’s time to add code to delete recipes and ingredients.</p>
<h3 id="deleting">Deleting<a class="headerlink" href="#deleting" title="Permanent link">&para;</a></h3>
<p>Deleting is much easier. You need to call the DAO methods. Replace <code>// TODO: Add Delete methods</code> with:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteRecipe</span><span class="p">(</span><span class="n">Recipe</span><span class="w"> </span><span class="n">recipe</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">_recipeDao</span><span class="p">.</span><span class="n">deleteRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">deleteRecipeIngredients</span><span class="p">(</span><span class="n">recipe</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteIngredient</span><span class="p">(</span><span class="n">Ingredient</span><span class="w"> </span><span class="n">ingredient</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_ingredientDao</span><span class="p">.</span><span class="n">deleteIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteIngredients</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">ingredient</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ingredients</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">_ingredientDao</span><span class="p">.</span><span class="n">deleteIngredient</span><span class="p">(</span><span class="n">ingredient</span><span class="p">.</span><span class="n">id</span><span class="o">!</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">value</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@override</span><span class="w"></span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteRecipeIngredients</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">recipeId</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 1</span><span class="w"></span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ingredients</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">findRecipeIngredients</span><span class="p">(</span><span class="n">recipeId</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// 2</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">deleteIngredients</span><span class="p">(</span><span class="n">ingredients</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The last method is the only one that’s different. In the code above, you:</p>
<ol>
<li>Find all ingredients for the given recipe ID.</li>
<li>Delete the list of ingredients.</li>
</ol>
<p>Phew! The hard work is over.</p>
<h4 id="replacing-the-repository">Replacing the repository<a class="headerlink" href="#replacing-the-repository" title="Permanent link">&para;</a></h4>
<p>Now, you just have to replace your SQL repository with your shiny new Moor repository.</p>
<p>Open <strong>main.dart</strong>. Add the import:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;data/moor/moor_repository.dart&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Delete the two import statements: <code>import 'data/memory_repository.dart’;</code> and <code>import 'data/sqlite/sqlite_repository.dart';</code>.</p>
<p>Replace this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">final</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SqliteRepository</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>with the following:</p>
<div class="highlight"><pre><span></span><code><span class="kd">final</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MoorRepository</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<h3 id="running-the-app_1">Running the app<a class="headerlink" href="#running-the-app_1" title="Permanent link">&para;</a></h3>
<p>Stop the running app, build and run. Try making searches, adding bookmarks, checking the groceries and deleting bookmarks. It will work just the same as with <code>SqliteRepository</code>. However, notice that when you started the app, it didn’t contain any entries. Do you know why?</p>
<blockquote>
<p><strong>Answer</strong>: The app now uses a different database file.</p>
</blockquote>
<p>Congratulations! Now, your app is using all the power provided by <strong>Moor</strong> to store data in a local database!</p>
<h3 id="cleaning-up-optional">Cleaning up (Optional)<a class="headerlink" href="#cleaning-up-optional" title="Permanent link">&para;</a></h3>
<p>In the next chapter you will not need the sqflite plugin now that you’re using Moor. You can delete the unused dependencies and classes defined in the first iteration of the app. Note that this is optional. To do so, delete the folder <strong>lib/data/sqlite</strong> and all its files. Then open <strong>pubspec.yml</strong>and remove the following libraries:</p>
<div class="highlight"><pre><span></span><code>sqflite: ^2.0.3+1
path_provider: ^2.0.11
synchronized: ^3.0.0+3
</code></pre></div>
<p>Run <strong>Pub get</strong> then hot restart the app and verify that it works as before.</p>
<h2 id="key-points">Key points<a class="headerlink" href="#key-points" title="Permanent link">&para;</a></h2>
<ul>
<li>Databases persist data locally to the device.</li>
<li>Data stored in databases are available after the app restarts.</li>
<li>The <strong>sqflite</strong> plugin requires some SQL knowledge to set up the database.</li>
<li>The <strong>Moor</strong> package is more powerful, easier to set up and you interact with the database via Dart classes that have clear responsibilities and are easy to reuse.</li>
</ul>
<h2 id="where-to-go-from-here">Where to go from here?<a class="headerlink" href="#where-to-go-from-here" title="Permanent link">&para;</a></h2>
<p>To learn about:</p>
<ul>
<li><strong>Databases and SQLite</strong>, go to https://flutter.dev/docs/cookbook/persistence/sqlite.</li>
<li><strong>sqflite</strong>, go to https://pub.dev/packages/sqflite.</li>
<li><strong>Moor</strong>, go to https://pub.dev/packages/moor_flutter.</li>
<li><strong>sqlbrite</strong> go to https://pub.dev/packages/sqlbrite.</li>
<li><strong>The database that started it all</strong>, go to https://www.sqlite.org/index.html.</li>
</ul>
<p>In the next section, you’ll learn all about deploying your apps.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../18.Working%20With%20Streams/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 18.Working With Streams" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              18.Working With Streams
            </div>
          </div>
        </a>
      
      
        
        <a href="../20.Section%20V%20Deployment/" class="md-footer__link md-footer__link--next" aria-label="下一页: 20.Section V Deployment" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              20.Section V Deployment
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.48f2be22.min.js"></script>
      
    
  </body>
</html>